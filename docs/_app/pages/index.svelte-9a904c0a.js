import{S as oe,i as ne,s as ie,e as k,k as V,c as $,a as v,d as p,m as N,b as u,g as C,H as h,K as ye,t as D,h as T,j as K,w as x,F as Y,x as J,G as F,y as ee,I as le,q as G,o as U,B as te,L as Fe,v as Re,M as Ge,N as Ue,O as Ze,P as He,U as Ke,V as Ee,W as Ie,X as We,l as De,Y as Te,n as qe,p as Qe,Z as Xe,_ as xe,$ as Je,a0 as et,a1 as tt,f as ue}from"../chunks/vendor-dca149f1.js";import{c as R,a as ae,s as ce,r as Oe,b as de}from"../chunks/store-6e616064.js";function st(r){let e,t,s,n,l,i,a,o,d,c,f,m,E,S,b,_,y,g;return{c(){e=k("div"),t=k("div"),n=V(),l=k("div"),a=V(),o=k("div"),c=V(),f=k("div"),E=V(),S=k("div"),_=V(),y=k("div"),this.h()},l(w){e=$(w,"DIV",{class:!0});var I=v(e);t=$(I,"DIV",{class:!0}),v(t).forEach(p),n=N(I),l=$(I,"DIV",{class:!0}),v(l).forEach(p),a=N(I),o=$(I,"DIV",{class:!0}),v(o).forEach(p),c=N(I),f=$(I,"DIV",{class:!0}),v(f).forEach(p),E=N(I),S=$(I,"DIV",{class:!0}),v(S).forEach(p),_=N(I),y=$(I,"DIV",{class:!0}),v(y).forEach(p),I.forEach(p),this.h()},h(){u(t,"class",s=`w-2/12 ${r[1](0,r[0].attempts)} border-r border-l`),u(l,"class",i=`w-2/12 ${r[1](1,r[0].attempts)} border-r border-l`),u(o,"class",d=`w-4/12 ${r[1](2,r[0].attempts)} border-r border-l`),u(f,"class",m=`w-4/12 ${r[1](3,r[0].attempts)} border-r border-l`),u(S,"class",b=`w-6/12 ${r[1](4,r[0].attempts)} border-r border-l`),u(y,"class",g=`w-6/12 ${r[1](5,r[0].attempts)} border-r border-l`),u(e,"class","max-w-3xl mx-auto flex h-3")},m(w,I){C(w,e,I),h(e,t),h(e,n),h(e,l),h(e,a),h(e,o),h(e,c),h(e,f),h(e,E),h(e,S),h(e,_),h(e,y)},p(w,[I]){I&1&&s!==(s=`w-2/12 ${w[1](0,w[0].attempts)} border-r border-l`)&&u(t,"class",s),I&1&&i!==(i=`w-2/12 ${w[1](1,w[0].attempts)} border-r border-l`)&&u(l,"class",i),I&1&&d!==(d=`w-4/12 ${w[1](2,w[0].attempts)} border-r border-l`)&&u(o,"class",d),I&1&&m!==(m=`w-4/12 ${w[1](3,w[0].attempts)} border-r border-l`)&&u(f,"class",m),I&1&&b!==(b=`w-6/12 ${w[1](4,w[0].attempts)} border-r border-l`)&&u(S,"class",b),I&1&&g!==(g=`w-6/12 ${w[1](5,w[0].attempts)} border-r border-l`)&&u(y,"class",g)},i:ye,o:ye,d(w){w&&p(e)}}}function rt(r,e,t){let{attempt:s}=e;const n=(l,i)=>{let a="bg-black opacity-40";return i===l&&!s.correct?a="bg-blue-500":i===l+1&&s.correct?a="bg-green-600":i>l&&(a="bg-red-600"),a};return r.$$set=l=>{"attempt"in l&&t(0,s=l.attempt)},[s,n]}class at extends oe{constructor(e){super();ne(this,e,rt,st,ie,{attempt:0})}}function Se(r){let e,t=Math.floor(r[0].currentTime/60)+"",s,n,l=(r[0].currentTime%60<10?"0"+r[0].currentTime%60:r[0].currentTime%60)+"",i;return{c(){e=k("div"),s=D(t),n=D(`
          : `),i=D(l),this.h()},l(a){e=$(a,"DIV",{class:!0});var o=v(e);s=T(o,t),n=T(o,`
          : `),i=T(o,l),o.forEach(p),this.h()},h(){u(e,"class","flex flex-1 justify-start font-mono")},m(a,o){C(a,e,o),h(e,s),h(e,n),h(e,i)},p(a,o){o&1&&t!==(t=Math.floor(a[0].currentTime/60)+"")&&K(s,t),o&1&&l!==(l=(a[0].currentTime%60<10?"0"+a[0].currentTime%60:a[0].currentTime%60)+"")&&K(i,l)},d(a){a&&p(e)}}}function Ve(r){let e,t=Math.floor(r[3]/60)+"",s,n,l=(Math.round(r[3]%60)<10?"0"+Math.round(r[3]%60):Math.round(r[3]%60))+"",i;return{c(){e=k("div"),s=D(t),n=D(`
          : `),i=D(l),this.h()},l(a){e=$(a,"DIV",{class:!0});var o=v(e);s=T(o,t),n=T(o,`
          : `),i=T(o,l),o.forEach(p),this.h()},h(){u(e,"class","flex flex-1 justify-end font-mono")},m(a,o){C(a,e,o),h(e,s),h(e,n),h(e,i)},p(a,o){o&8&&t!==(t=Math.floor(a[3]/60)+"")&&K(s,t),o&8&&l!==(l=(Math.round(a[3]%60)<10?"0"+Math.round(a[3]%60):Math.round(a[3]%60))+"")&&K(i,l)},d(a){a&&p(e)}}}function lt(r){let e,t,s,n,l,i,a,o,d,c,f,m,E,S,b,_,y,g,w,I,z,Z,O;s=new at({props:{attempt:r[1]}});let j=r[0]&&Se(r),P=r[0]&&Ve(r);return{c(){e=k("footer"),t=k("div"),x(s.$$.fragment),n=V(),l=k("div"),i=k("div"),j&&j.c(),a=V(),o=k("div"),d=k("button"),c=Y("svg"),f=Y("path"),m=Y("path"),S=V(),b=k("button"),_=Y("svg"),y=Y("path"),g=Y("path"),I=V(),P&&P.c(),this.h()},l(M){e=$(M,"FOOTER",{class:!0});var A=v(e);t=$(A,"DIV",{class:!0});var H=v(t);J(s.$$.fragment,H),H.forEach(p),n=N(A),l=$(A,"DIV",{class:!0});var se=v(l);i=$(se,"DIV",{class:!0});var W=v(i);j&&j.l(W),a=N(W),o=$(W,"DIV",{class:!0});var B=v(o);d=$(B,"BUTTON",{title:!0,class:!0});var L=v(d);c=F(L,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0,xmlns:!0});var q=v(c);f=F(q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(f).forEach(p),m=F(q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(m).forEach(p),q.forEach(p),L.forEach(p),S=N(B),b=$(B,"BUTTON",{title:!0,class:!0});var Q=v(b);_=F(Q,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var re=v(_);y=F(re,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(y).forEach(p),g=F(re,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(g).forEach(p),re.forEach(p),Q.forEach(p),B.forEach(p),I=N(W),P&&P.l(W),W.forEach(p),se.forEach(p),A.forEach(p),this.h()},h(){u(t,"class","border-b"),u(f,"stroke-linecap","round"),u(f,"stroke-linejoin","round"),u(f,"stroke-width","2"),u(f,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),u(m,"stroke-linecap","round"),u(m,"stroke-linejoin","round"),u(m,"stroke-width","2"),u(m,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),u(c,"class","w-14 h-14 mx-auto"),u(c,"fill","none"),u(c,"stroke","currentColor"),u(c,"viewBox","0 0 24 24"),u(c,"xmlns","http://www.w3.org/2000/svg"),u(d,"title","Play Song"),u(d,"class",E=`hover:text-green-600 transition-colors duration-200 ${r[2]?"":"hidden"}`),u(y,"stroke-linecap","round"),u(y,"stroke-linejoin","round"),u(y,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),u(g,"stroke-linecap","round"),u(g,"stroke-linejoin","round"),u(g,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),u(_,"xmlns","http://www.w3.org/2000/svg"),u(_,"class","w-14 h-14 mx-auto"),u(_,"fill","none"),u(_,"viewBox","0 0 24 24"),u(_,"stroke","currentColor"),u(_,"stroke-width","2"),u(b,"title","Pause Song"),u(b,"class",w=`hover:text-green-600 transition-colors duration-200 ${r[2]?"hidden":""}`),u(o,"class","text-center flex-1 justify-center"),u(i,"class","flex justify-evenly items-center w-full"),u(l,"class","max-w-screen-md mx-auto p-3"),u(e,"class","border-t border-gray-500 bottom-0 w-full fixed bg-gray-800")},m(M,A){C(M,e,A),h(e,t),ee(s,t,null),h(e,n),h(e,l),h(l,i),j&&j.m(i,null),h(i,a),h(i,o),h(o,d),h(d,c),h(c,f),h(c,m),h(o,S),h(o,b),h(b,_),h(_,y),h(_,g),h(i,I),P&&P.m(i,null),z=!0,Z||(O=[le(d,"click",r[4]),le(b,"click",r[5])],Z=!0)},p(M,[A]){const H={};A&2&&(H.attempt=M[1]),s.$set(H),M[0]?j?j.p(M,A):(j=Se(M),j.c(),j.m(i,a)):j&&(j.d(1),j=null),(!z||A&4&&E!==(E=`hover:text-green-600 transition-colors duration-200 ${M[2]?"":"hidden"}`))&&u(d,"class",E),(!z||A&4&&w!==(w=`hover:text-green-600 transition-colors duration-200 ${M[2]?"hidden":""}`))&&u(b,"class",w),M[0]?P?P.p(M,A):(P=Ve(M),P.c(),P.m(i,null)):P&&(P.d(1),P=null)},i(M){z||(G(s.$$.fragment,M),z=!0)},o(M){U(s.$$.fragment,M),z=!1},d(M){M&&p(e),te(s),j&&j.d(),P&&P.d(),Z=!1,Fe(O)}}}function ot(r,e,t){let s,n={attempts:0,guesses:[],correct:!1,date:new Date},l=!0,i=0;return Re(()=>{t(1,n=R.get()),t(0,s=new Audio(ae.get().preview)),s.addEventListener("loadedmetadata",()=>t(3,i=s.duration))}),R.listen(d=>t(1,n=d)),ae.listen(d=>t(0,s=new Audio(d.preview))),ce.listen(d=>t(2,l=d)),[s,n,l,i,()=>{ce.set(!1),s.play();let d=12-n.attempts*6;const c=.08333333;switch(n.attempts){case 0:d=c;break;case 1:d=c*2;break;case 2:d=c*4;break;case 3:d=.5;break;case 4:d=.75;break;default:d=1;break}const f=n.correct?s.duration*1e3:s.duration/2*1e3*d;setTimeout(()=>{s.pause(),t(0,s.currentTime=0,s),ce.set(!0)},f)},()=>{s.pause(),t(0,s.currentTime=0,s),ce.set(!0)}]}class nt extends oe{constructor(e){super();ne(this,e,ot,lt,ie,{})}}function it(r){let e,t,s,n,l;const i=r[5].default,a=Ge(i,r,r[4],null);return{c(){e=k("button"),a&&a.c(),this.h()},l(o){e=$(o,"BUTTON",{title:!0,class:!0});var d=v(e);a&&a.l(d),d.forEach(p),this.h()},h(){u(e,"title",r[1]),u(e,"class",t=`p-2 text-white ${r[2]} rounded-md shadow hover:shadow-lg transition-all duration-200 ${r[0]}`)},m(o,d){C(o,e,d),a&&a.m(e,null),s=!0,n||(l=le(e,"click",r[6]),n=!0)},p(o,[d]){a&&a.p&&(!s||d&16)&&Ue(a,i,o,o[4],s?He(i,o[4],d,null):Ze(o[4]),null),(!s||d&2)&&u(e,"title",o[1]),(!s||d&5&&t!==(t=`p-2 text-white ${o[2]} rounded-md shadow hover:shadow-lg transition-all duration-200 ${o[0]}`))&&u(e,"class",t)},i(o){s||(G(a,o),s=!0)},o(o){U(a,o),s=!1},d(o){o&&p(e),a&&a.d(o),n=!1,l()}}}function ct(r,e,t){let{$$slots:s={},$$scope:n}=e,{type:l}=e,{className:i=""}=e,{title:a}=e,o;switch(l){case"primary":o="bg-blue-600 hover:bg-blue-500";break;case"submit":o="bg-green-600 hover:bg-green-500";break;case"warning":o="bg-orange-600 hover:bg-orange-500";break;case"breaking":o="bg-red-600 hover:bg-red-500";break;default:o="bg-blue-600 hover:bg-blue-500";break}function d(c){Ke.call(this,r,c)}return r.$$set=c=>{"type"in c&&t(3,l=c.type),"className"in c&&t(0,i=c.className),"title"in c&&t(1,a=c.title),"$$scope"in c&&t(4,n=c.$$scope)},[i,a,o,l,n,s,d]}class he extends oe{constructor(e){super();ne(this,e,ct,it,ie,{type:3,className:0,title:1})}}function ut(r){let e;return{c(){e=D("sounds cool")},l(t){e=T(t,"sounds cool")},m(t,s){C(t,e,s)},d(t){t&&p(e)}}}function dt(r){let e,t,s,n,l,i,a,o,d,c,f,m,E,S,b,_,y,g,w,I,z,Z,O,j,P,M,A,H,se,W;return A=new he({props:{type:"primary",$$slots:{default:[ut]},$$scope:{ctx:r}}}),A.$on("click",r[2]),{c(){e=k("div"),t=k("div"),s=V(),n=k("div"),l=k("div"),i=k("h1"),a=D("Instructions"),o=V(),d=k("div"),c=k("ul"),f=k("li"),m=k("span"),E=D("press the play button"),S=V(),b=k("li"),_=k("span"),y=D("listen to the song snippet"),g=V(),w=k("li"),I=k("span"),z=D("type the name of the song or song artist into the box"),Z=V(),O=k("li"),j=k("span"),P=D("if you get the song incorrect or press skip, more of the song will be revealed"),M=V(),x(A.$$.fragment),this.h()},l(B){e=$(B,"DIV",{});var L=v(e);t=$(L,"DIV",{class:!0}),v(t).forEach(p),s=N(L),n=$(L,"DIV",{class:!0});var q=v(n);l=$(q,"DIV",{class:!0});var Q=v(l);i=$(Q,"H1",{class:!0});var re=v(i);a=T(re,"Instructions"),re.forEach(p),o=N(Q),d=$(Q,"DIV",{class:!0});var pe=v(d);c=$(pe,"UL",{class:!0});var X=v(c);f=$(X,"LI",{});var me=v(f);m=$(me,"SPAN",{});var ge=v(m);E=T(ge,"press the play button"),ge.forEach(p),me.forEach(p),S=N(X),b=$(X,"LI",{});var ve=v(b);_=$(ve,"SPAN",{});var _e=v(_);y=T(_e,"listen to the song snippet"),_e.forEach(p),ve.forEach(p),g=N(X),w=$(X,"LI",{});var be=v(w);I=$(be,"SPAN",{});var we=v(I);z=T(we,"type the name of the song or song artist into the box"),we.forEach(p),be.forEach(p),Z=N(X),O=$(X,"LI",{});var ke=v(O);j=$(ke,"SPAN",{});var $e=v(j);P=T($e,"if you get the song incorrect or press skip, more of the song will be revealed"),$e.forEach(p),ke.forEach(p),X.forEach(p),pe.forEach(p),M=N(Q),J(A.$$.fragment,Q),Q.forEach(p),q.forEach(p),L.forEach(p),this.h()},h(){u(t,"class","flex overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-40 justify-center items-center h-modal md:h-full md:inset-0 bg-black opacity-50"),u(i,"class","text-3xl"),u(c,"class","text-left"),u(d,"class","p-4"),u(l,"class","relative rounded-lg bg-gray-700 p-3 opacity-100 shadow"),u(n,"class","relative px-4 w-full max-w-2xl h-full md:h-auto mx-auto z-50"),Ee(e,"hidden",r[0])},m(B,L){C(B,e,L),h(e,t),h(e,s),h(e,n),h(n,l),h(l,i),h(i,a),h(l,o),h(l,d),h(d,c),h(c,f),h(f,m),h(m,E),h(c,S),h(c,b),h(b,_),h(_,y),h(c,g),h(c,w),h(w,I),h(I,z),h(c,Z),h(c,O),h(O,j),h(j,P),h(l,M),ee(A,l,null),H=!0,se||(W=le(t,"click",r[1]),se=!0)},p(B,[L]){const q={};L&8&&(q.$$scope={dirty:L,ctx:B}),A.$set(q),L&1&&Ee(e,"hidden",B[0])},i(B){H||(G(A.$$.fragment,B),H=!0)},o(B){U(A.$$.fragment,B),H=!1},d(B){B&&p(e),te(A),se=!1,W()}}}function ft(r,e,t){let{hidden:s=!0}=e;const n=()=>t(0,s=!0),l=()=>{t(0,s=!0),Oe.set(!0)};return r.$$set=i=>{"hidden"in i&&t(0,s=i.hidden)},[s,n,l]}class ht extends oe{constructor(e){super();ne(this,e,ft,dt,ie,{hidden:0})}}const Ne=async()=>{const r=new URLSearchParams;r.append("grant_type","client_credentials");const e=new Headers;e.append("Authorization","Basic ZTA2MjNlNTk1YjZkNGI2YTg5M2FlMDk5YzUzYzE3NWY6MzMwNDRmYTNmZTY3NDEzNmFhOWVmZDIyZjI0MGMyZjc="),e.append("Content-Type","application/x-www-form-urlencoded");const s=await(await fetch("https://accounts.spotify.com/api/token",{method:"POST",body:r,redirect:"follow",headers:e})).json();return{token:s.access_token,expires_at:new Date(Date.now()+s.expires_in*1e3),type:s.type}},pt=async(r,e)=>await(await fetch(`https://api.spotify.com/v1/playlists/${r}/`,{headers:{accept:"application/json",authorization:`Bearer ${e}`},method:"GET"})).json(),mt=async(r,e)=>{let t=r.tracks.items,s=r.tracks.next;for(;s;){const l=await(await fetch(s,{headers:{accept:"application/json",authorization:`Bearer ${e}`},method:"GET"})).json();if(l.error)throw new Error(`Oops! ${l.error.status}: ${l.error.message}`);t=t.concat(l.items),s=l.next,t.push(l.items)}return t=t.filter(n=>n.track&&n.track.preview_url),t.map(n=>n.track)},gt=async(r,e)=>{const t=new Date,s=e?Math.random()*10*(Math.random()+20):0;Ie.use(We(parseInt(t.toLocaleDateString().replace(new RegExp("/","g"),""))+s));const n=Ie.int(0,r.length-1);return r[n]},fe=r=>({name:r.name,artist:r.artists?r.artists[0].name:"unknown artist",id:r.id,preview:r.preview_url}),Ye=(r,e)=>{const t=Math.abs(r.getTime()-e.getTime());return Math.ceil(t/(1e3*60*60*24))};function Me(r,e,t){const s=r.slice();return s[17]=e[t],s}function je(r,e,t){const s=r.slice();return s[17]=e[t],s}function Ae(r){let e,t,s;return{c(){e=k("div"),t=k("span"),s=D("listen to the song and try to guess it correctly. you have 6 attempts."),this.h()},l(n){e=$(n,"DIV",{class:!0});var l=v(e);t=$(l,"SPAN",{class:!0});var i=v(t);s=T(i,"listen to the song and try to guess it correctly. you have 6 attempts."),i.forEach(p),l.forEach(p),this.h()},h(){u(t,"class","text-center mx-auto w-full text-blue-100"),u(e,"class","w-full px-0 sm:px-20 transition-all duration-200")},m(n,l){C(n,e,l),h(e,t),h(t,s)},d(n){n&&p(e)}}}function Ce(r){let e,t,s=r[1].guesses.filter(Be),n=[];for(let a=0;a<s.length;a+=1)n[a]=Pe(je(r,s,a));let l=r[1].guesses.filter(Le),i=[];for(let a=0;a<l.length;a+=1)i[a]=ze(Me(r,l,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=V();for(let a=0;a<i.length;a+=1)i[a].c();t=De()},l(a){for(let o=0;o<n.length;o+=1)n[o].l(a);e=N(a);for(let o=0;o<i.length;o+=1)i[o].l(a);t=De()},m(a,o){for(let d=0;d<n.length;d+=1)n[d].m(a,o);C(a,e,o);for(let d=0;d<i.length;d+=1)i[d].m(a,o);C(a,t,o)},p(a,o){if(o&2){s=a[1].guesses.filter(Be);let d;for(d=0;d<s.length;d+=1){const c=je(a,s,d);n[d]?n[d].p(c,o):(n[d]=Pe(c),n[d].c(),n[d].m(e.parentNode,e))}for(;d<n.length;d+=1)n[d].d(1);n.length=s.length}if(o&2){l=a[1].guesses.filter(Le);let d;for(d=0;d<l.length;d+=1){const c=Me(a,l,d);i[d]?i[d].p(c,o):(i[d]=ze(c),i[d].c(),i[d].m(t.parentNode,t))}for(;d<i.length;d+=1)i[d].d(1);i.length=l.length}},d(a){Te(n,a),a&&p(e),Te(i,a),a&&p(t)}}}function Pe(r){let e,t=r[17].song.name+"",s,n,l=r[17].song.artist+"",i,a,o,d;function c(){return r[10](r[17])}return{c(){e=k("div"),s=D(t),n=D(" by "),i=D(l),this.h()},l(f){e=$(f,"DIV",{title:!0,class:!0});var m=v(e);s=T(m,t),n=T(m," by "),i=T(m,l),m.forEach(p),this.h()},h(){u(e,"title","Open in Spotify"),u(e,"class",a=`cursor-pointer ${r[17].artistCorrect?"border-amber-400":"border-red-600"} border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden`)},m(f,m){C(f,e,m),h(e,s),h(e,n),h(e,i),o||(d=le(e,"click",c),o=!0)},p(f,m){r=f,m&2&&t!==(t=r[17].song.name+"")&&K(s,t),m&2&&l!==(l=r[17].song.artist+"")&&K(i,l),m&2&&a!==(a=`cursor-pointer ${r[17].artistCorrect?"border-amber-400":"border-red-600"} border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden`)&&u(e,"class",a)},d(f){f&&p(e),o=!1,d()}}}function ze(r){let e,t=r[17].song.name+"",s,n,l=r[17].song.artist+"",i,a,o,d;function c(){return r[11](r[17])}return{c(){e=k("div"),s=D(t),n=D(" by "),i=D(l),a=V(),this.h()},l(f){e=$(f,"DIV",{title:!0,class:!0});var m=v(e);s=T(m,t),n=T(m," by "),i=T(m,l),a=N(m),m.forEach(p),this.h()},h(){u(e,"title","Open in Spotify"),u(e,"class","cursor-pointer border-green-600 border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden")},m(f,m){C(f,e,m),h(e,s),h(e,n),h(e,i),h(e,a),o||(d=le(e,"click",c),o=!0)},p(f,m){r=f,m&2&&t!==(t=r[17].song.name+"")&&K(s,t),m&2&&l!==(l=r[17].song.artist+"")&&K(i,l)},d(f){f&&p(e),o=!1,d()}}}function vt(r){let e,t,s,n=Ye(new Date,r[5])+"",l,i,a=r[8]()+"",o,d,c,f,m,E,S,b,_;return f=new he({props:{className:"block mx-auto",type:"submit",$$slots:{default:[bt]},$$scope:{ctx:r}}}),f.$on("click",r[9]),{c(){e=k("div"),t=k("span"),s=D("audial #"),l=D(n),i=V(),o=D(a),d=V(),c=k("div"),x(f.$$.fragment),m=V(),E=k("p"),S=D("copied to clipboard."),this.h()},l(y){e=$(y,"DIV",{class:!0});var g=v(e);t=$(g,"SPAN",{class:!0});var w=v(t);s=T(w,"audial #"),l=T(w,n),i=N(w),o=T(w,a),w.forEach(p),d=N(g),c=$(g,"DIV",{class:!0});var I=v(c);J(f.$$.fragment,I),m=N(I),E=$(I,"P",{class:!0});var z=v(E);S=T(z,"copied to clipboard."),z.forEach(p),I.forEach(p),g.forEach(p),this.h()},h(){u(t,"class","my-2"),u(E,"class",b=`${r[0]?"opacity-100":"opacity-0"} text-blue-100 font-semibold transition-all duration-500 my-2`),u(c,"class","w-full mx-auto my-2"),u(e,"class","py-3")},m(y,g){C(y,e,g),h(e,t),h(t,s),h(t,l),h(t,i),h(t,o),h(e,d),h(e,c),ee(f,c,null),h(c,m),h(c,E),h(E,S),_=!0},p(y,g){const w={};g&4194304&&(w.$$scope={dirty:g,ctx:y}),f.$set(w),(!_||g&1&&b!==(b=`${y[0]?"opacity-100":"opacity-0"} text-blue-100 font-semibold transition-all duration-500 my-2`))&&u(E,"class",b)},i(y){_||(G(f.$$.fragment,y),_=!0)},o(y){U(f.$$.fragment,y),_=!1},d(y){y&&p(e),te(f)}}}function _t(r){let e,t,s,n,l,i,a;function o(c){r[12](c)}let d={name:"song-selection",className:"w-10/12",inputClassName:"border-gray-600 border-2 w-full h-8 px-2 py-5 rounded-sm bg-gray-900 hover:border-gray-400 focus:border-gray-400 outline-none transition-all duration-200",dropdownClassName:"p-0 bg-gray-900",placeholder:`${6-r[1].attempts} ${6-r[1].attempts!==1?"attempts":"attempt"} left`,items:r[2],minCharactersToSearch:2,searchFunction:r[7],labelFieldName:"name",valueFieldName:"id",showLoadingIndicator:!0,noInputStyles:!0,hideArrow:!0,$$slots:{loading:[$t],"no-results":[kt],item:[wt,({label:c,item:f})=>({15:c,16:f}),({label:c,item:f})=>(c?32768:0)|(f?65536:0)]},$$scope:{ctx:r}};return r[3]!==void 0&&(d.selectedItem=r[3]),t=new xe({props:d}),Je.push(()=>et(t,"selectedItem",o)),i=new he({props:{title:"Submit Song Guess",type:"primary",className:"w-full",$$slots:{default:[yt]},$$scope:{ctx:r}}}),i.$on("click",r[6]),{c(){e=k("div"),x(t.$$.fragment),n=V(),l=k("div"),x(i.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0,title:!0});var f=v(e);J(t.$$.fragment,f),n=N(f),l=$(f,"DIV",{class:!0,title:!0});var m=v(l);J(i.$$.fragment,m),m.forEach(p),f.forEach(p),this.h()},h(){u(l,"class","w-2/12 pl-4 mt-0.5"),u(l,"title","guess selected song"),u(e,"class","flex my-6"),u(e,"title","guess a song")},m(c,f){C(c,e,f),ee(t,e,null),h(e,n),h(e,l),ee(i,l,null),a=!0},p(c,f){const m={};f&2&&(m.placeholder=`${6-c[1].attempts} ${6-c[1].attempts!==1?"attempts":"attempt"} left`),f&4&&(m.items=c[2]),f&4259840&&(m.$$scope={dirty:f,ctx:c}),!s&&f&8&&(s=!0,m.selectedItem=c[3],tt(()=>s=!1)),t.$set(m);const E={};f&4194304&&(E.$$scope={dirty:f,ctx:c}),i.$set(E)},i(c){a||(G(t.$$.fragment,c),G(i.$$.fragment,c),a=!0)},o(c){U(t.$$.fragment,c),U(i.$$.fragment,c),a=!1},d(c){c&&p(e),te(t),te(i)}}}function bt(r){let e;return{c(){e=D("share")},l(t){e=T(t,"share")},m(t,s){C(t,e,s)},d(t){t&&p(e)}}}function wt(r){let e,t,s=r[16].name+"",n,l,i=r[16].artist+"",a;return{c(){e=k("div"),t=k("span"),n=D(s),l=D(" by "),a=D(i),this.h()},l(o){e=$(o,"DIV",{slot:!0,class:!0});var d=v(e);t=$(d,"SPAN",{});var c=v(t);n=T(c,s),l=T(c," by "),a=T(c,i),c.forEach(p),d.forEach(p),this.h()},h(){u(e,"slot","item"),u(e,"class","border-2 h-10 px-2 py-3 w-full text-left rounded-sm bg-gray-900 text-white hover:text-blue-500 hover:border-blue-500 overflow-ellipsis whitespace-nowrap overflow-hidden transition-colors duration-150")},m(o,d){C(o,e,d),h(e,t),h(t,n),h(t,l),h(t,a)},p(o,d){d&65536&&s!==(s=o[16].name+"")&&K(n,s),d&65536&&i!==(i=o[16].artist+"")&&K(a,i)},d(o){o&&p(e)}}}function kt(r){let e,t,s;return{c(){e=k("div"),t=k("span"),s=D("could not find this song in our list."),this.h()},l(n){e=$(n,"DIV",{slot:!0,class:!0});var l=v(e);t=$(l,"SPAN",{});var i=v(t);s=T(i,"could not find this song in our list."),i.forEach(p),l.forEach(p),this.h()},h(){u(e,"slot","no-results"),u(e,"class","py-1")},m(n,l){C(n,e,l),h(e,t),h(t,s)},d(n){n&&p(e)}}}function $t(r){let e,t,s;return{c(){e=k("div"),t=k("span"),s=D("searching for songs..."),this.h()},l(n){e=$(n,"DIV",{slot:!0,class:!0});var l=v(e);t=$(l,"SPAN",{});var i=v(t);s=T(i,"searching for songs..."),i.forEach(p),l.forEach(p),this.h()},h(){u(e,"slot","loading"),u(e,"class","py-1")},m(n,l){C(n,e,l),h(e,t),h(t,s)},d(n){n&&p(e)}}}function yt(r){let e,t;return{c(){e=Y("svg"),t=Y("path"),this.h()},l(s){e=F(s,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var n=v(e);t=F(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(p),n.forEach(p),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M13 7l5 5m0 0l-5 5m5-5H6"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-6 w-6 mx-auto"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor"),u(e,"stroke-width","2")},m(s,n){C(s,e,n),h(e,t)},d(s){s&&p(e)}}}function Et(r){let e,t,s,n,l,i,a,o,d;t=new ht({props:{hidden:r[4]}});let c=r[1].attempts===0&&Ae(),f=r[1].guesses&&Ce(r);const m=[_t,vt],E=[];function S(b,_){return b[1].attempts<6&&!b[1].correct?0:1}return a=S(r),o=E[a]=m[a](r),{c(){e=k("div"),x(t.$$.fragment),s=V(),c&&c.c(),n=V(),l=k("div"),f&&f.c(),i=V(),o.c(),this.h()},l(b){e=$(b,"DIV",{});var _=v(e);J(t.$$.fragment,_),s=N(_),c&&c.l(_),n=N(_),l=$(_,"DIV",{class:!0});var y=v(l);f&&f.l(y),i=N(y),o.l(y),y.forEach(p),_.forEach(p),this.h()},h(){u(l,"class","w-full px-0 transition-all sm:px-20 items-center game")},m(b,_){C(b,e,_),ee(t,e,null),h(e,s),c&&c.m(e,null),h(e,n),h(e,l),f&&f.m(l,null),h(l,i),E[a].m(l,null),d=!0},p(b,[_]){const y={};_&16&&(y.hidden=b[4]),t.$set(y),b[1].attempts===0?c||(c=Ae(),c.c(),c.m(e,n)):c&&(c.d(1),c=null),b[1].guesses?f?f.p(b,_):(f=Ce(b),f.c(),f.m(l,i)):f&&(f.d(1),f=null);let g=a;a=S(b),a===g?E[a].p(b,_):(qe(),U(E[g],1,1,()=>{E[g]=null}),Qe(),o=E[a],o?o.p(b,_):(o=E[a]=m[a](b),o.c()),G(o,1),o.m(l,null))},i(b){d||(G(t.$$.fragment,b),G(o),d=!0)},o(b){U(t.$$.fragment,b),U(o),d=!1},d(b){b&&p(e),te(t),c&&c.d(),f&&f.d(),E[a].d()}}}const Be=r=>!r.correct,Le=r=>r.correct;function It(r,e,t){let s;Xe(r,Oe,g=>t(4,s=g));const n=new Date(1648594699909);let l=!1,i={},a={},o=[];Re(async()=>{let g=de.get();g.token||(g=await Ne(),de.set(g)),new Date(g.expires_at)<new Date&&(g=await Ne(),de.set(g)),a=await pt("5LQuCyn8AhcHpl31DgLaxL",g.token),o=await mt(a,g.token);const w=new URL(window.location.href).searchParams.get("random")==="true",I=await gt(o,w);if(new Date(R.get().date)!==new Date||w){const z=fe(I);R.set({guesses:[],date:new Date,correct:!1,attempts:0}),ae.set(z)}t(1,i=R.get())}),R.listen(g=>t(1,i=g));let d=[],c={};const f=()=>{if(!c)return;const g=[...i.guesses||[]];if(c.id===ae.get().id)g.push({song:ae.get(),correct:!0,artistCorrect:!0}),R.setKey("guesses",g),R.setKey("correct",!0),R.setKey("attempts",i.attempts+1);else{const w=o.find(I=>I.id==c.id);g.push({song:fe(w),correct:!1,artistCorrect:c.artist.includes(ae.get().artist)}),R.setKey("guesses",g),R.setKey("attempts",i.attempts+1)}t(3,c=void 0),ce.set(!0)},m=async g=>(t(2,d=o.filter(w=>(w.name+" "+w.artists[0].name).toLowerCase().includes(g.toLowerCase()))),t(2,d=d.map(w=>fe(w))),d),E=()=>{let g="";for(const w of i.guesses||[])w.correct?g+="\u{1F7E9} ":w.artistCorrect?g+="\u{1F7E8} ":g+="\u{1F7E5} ";for(let w=0;w<6-i.attempts;w++)g+="\u2B1B ";return g},S=()=>{let g="audial #"+Ye(new Date,n);g+=`
`+E(),g+=`
https://audial.mogdan.xyz`,navigator.clipboard.writeText(g),t(0,l=!0)},b=g=>{window.open(`https://open.spotify.com/track/${g.song.id}`,"_blank").focus()},_=g=>{window.open(`https://open.spotify.com/track/${g.song.id}`,"_blank").focus()};function y(g){c=g,t(3,c)}return[l,i,d,c,s,n,f,m,E,S,b,_,y]}class Dt extends oe{constructor(e){super();ne(this,e,It,Et,ie,{})}}function Tt(r){let e,t,s,n,l,i,a,o,d,c,f,m,E,S,b;return l=new Dt({}),a=new nt({}),{c(){e=k("div"),t=k("div"),s=k("div"),n=k("div"),x(l.$$.fragment),i=V(),x(a.$$.fragment),d=V(),c=k("div"),f=Y("svg"),m=Y("circle"),E=Y("animateTransform"),this.h()},l(_){e=$(_,"DIV",{});var y=v(e);t=$(y,"DIV",{class:!0});var g=v(t);s=$(g,"DIV",{class:!0});var w=v(s);n=$(w,"DIV",{class:!0});var I=v(n);J(l.$$.fragment,I),I.forEach(p),w.forEach(p),i=N(g),J(a.$$.fragment,g),g.forEach(p),d=N(y),c=$(y,"DIV",{class:!0});var z=v(c);f=F(z,"svg",{xmlns:!0,"xmlns:xlink":!0,style:!0,width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0});var Z=v(f);m=F(Z,"circle",{cx:!0,cy:!0,fill:!0,stroke:!0,"stroke-width":!0,r:!0,"stroke-dasharray":!0});var O=v(m);E=F(O,"animateTransform",{attributeName:!0,type:!0,repeatCount:!0,dur:!0,values:!0,keyTimes:!0}),v(E).forEach(p),O.forEach(p),Z.forEach(p),z.forEach(p),y.forEach(p),this.h()},h(){u(n,"class","text-center p-3"),u(s,"class","max-w-screen-md mx-auto"),u(t,"class",o=`${r[0]?"hidden":""}`),u(E,"attributeName","transform"),u(E,"type","rotate"),u(E,"repeatCount","indefinite"),u(E,"dur","0.9345794392523364s"),u(E,"values","0 50 50;360 50 50"),u(E,"keyTimes","0;1"),u(m,"cx","50"),u(m,"cy","50"),u(m,"fill","none"),u(m,"stroke","currentColor"),u(m,"stroke-width","7"),u(m,"r","38"),u(m,"stroke-dasharray","179.0707812546182 61.690260418206066"),u(f,"xmlns","http://www.w3.org/2000/svg"),u(f,"xmlns:xlink","http://www.w3.org/1999/xlink"),ue(f,"margin","auto"),ue(f,"background","transparent"),ue(f,"display","block"),ue(f,"shape-rendering","auto"),u(f,"width","100px"),u(f,"height","100px"),u(f,"viewBox","0 0 100 100"),u(f,"preserveAspectRatio","xMidYMid"),u(c,"class",S=`w-full mx-auto text-center mt-20 ${r[0]?"":"hidden"} text-blue-600`)},m(_,y){C(_,e,y),h(e,t),h(t,s),h(s,n),ee(l,n,null),h(t,i),ee(a,t,null),h(e,d),h(e,c),h(c,f),h(f,m),h(m,E),b=!0},p(_,[y]){(!b||y&1&&o!==(o=`${_[0]?"hidden":""}`))&&u(t,"class",o),(!b||y&1&&S!==(S=`w-full mx-auto text-center mt-20 ${_[0]?"":"hidden"} text-blue-600`))&&u(c,"class",S)},i(_){b||(G(l.$$.fragment,_),G(a.$$.fragment,_),b=!0)},o(_){U(l.$$.fragment,_),U(a.$$.fragment,_),b=!1},d(_){_&&p(e),te(l),te(a)}}}function St(r,e,t){let s=!0;return R.listen(n=>{n.date&&t(0,s=!1)}),[s]}class Mt extends oe{constructor(e){super();ne(this,e,St,Tt,ie,{})}}export{Mt as default};
