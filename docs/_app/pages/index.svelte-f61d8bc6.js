import{S as oe,i as ne,s as ie,e as _,k as S,c as b,a as v,d as p,m as V,b as d,g as j,H as h,K as he,t as I,h as D,j as K,w as J,F as G,x,G as U,y as ee,I as ae,q as L,o as O,B as te,L as He,v as Ye,M as Ke,N as We,O as qe,P as Qe,U as Xe,V as Ee,W as Ie,X as Je,l as De,Y as Te,n as Fe,p as Ge,Z as xe,_ as et,$ as tt,a0 as st,a1 as rt,f as ue}from"../chunks/vendor-dca149f1.js";import{c as Y,a as le,s as ce,r as Ue,b as de}from"../chunks/store-6e616064.js";function lt(r){let e,t,s,i,o,u,l,a,n,c,f,m,E,N,k,w,y,T;return{c(){e=_("div"),t=_("div"),i=S(),o=_("div"),l=S(),a=_("div"),c=S(),f=_("div"),E=S(),N=_("div"),w=S(),y=_("div"),this.h()},l(g){e=b(g,"DIV",{class:!0});var $=v(e);t=b($,"DIV",{class:!0}),v(t).forEach(p),i=V($),o=b($,"DIV",{class:!0}),v(o).forEach(p),l=V($),a=b($,"DIV",{class:!0}),v(a).forEach(p),c=V($),f=b($,"DIV",{class:!0}),v(f).forEach(p),E=V($),N=b($,"DIV",{class:!0}),v(N).forEach(p),w=V($),y=b($,"DIV",{class:!0}),v(y).forEach(p),$.forEach(p),this.h()},h(){d(t,"class",s=`w-2/12 ${r[1](0,r[0].attempts)} border-r border-l`),d(o,"class",u=`w-2/12 ${r[1](1,r[0].attempts)} border-r border-l`),d(a,"class",n=`w-4/12 ${r[1](2,r[0].attempts)} border-r border-l`),d(f,"class",m=`w-4/12 ${r[1](3,r[0].attempts)} border-r border-l`),d(N,"class",k=`w-6/12 ${r[1](4,r[0].attempts)} border-r border-l`),d(y,"class",T=`w-6/12 ${r[1](5,r[0].attempts)} border-r border-l`),d(e,"class","max-w-3xl mx-auto flex h-3")},m(g,$){j(g,e,$),h(e,t),h(e,i),h(e,o),h(e,l),h(e,a),h(e,c),h(e,f),h(e,E),h(e,N),h(e,w),h(e,y)},p(g,[$]){$&1&&s!==(s=`w-2/12 ${g[1](0,g[0].attempts)} border-r border-l`)&&d(t,"class",s),$&1&&u!==(u=`w-2/12 ${g[1](1,g[0].attempts)} border-r border-l`)&&d(o,"class",u),$&1&&n!==(n=`w-4/12 ${g[1](2,g[0].attempts)} border-r border-l`)&&d(a,"class",n),$&1&&m!==(m=`w-4/12 ${g[1](3,g[0].attempts)} border-r border-l`)&&d(f,"class",m),$&1&&k!==(k=`w-6/12 ${g[1](4,g[0].attempts)} border-r border-l`)&&d(N,"class",k),$&1&&T!==(T=`w-6/12 ${g[1](5,g[0].attempts)} border-r border-l`)&&d(y,"class",T)},i:he,o:he,d(g){g&&p(e)}}}function at(r,e,t){let{attempt:s}=e;const i=(o,u)=>{let l="bg-black opacity-40";return u===o&&!s.correct?l="bg-blue-500":u===o+1&&s.correct?l="bg-green-600":u>o&&(l="bg-red-600"),l};return r.$$set=o=>{"attempt"in o&&t(0,s=o.attempt)},[s,i]}class ot extends oe{constructor(e){super();ne(this,e,at,lt,ie,{attempt:0})}}function Se(r){let e,t=Math.floor(r[0].currentTime/60)+"",s,i,o=(r[0].currentTime%60<10?"0"+r[0].currentTime%60:r[0].currentTime%60)+"",u;return{c(){e=_("div"),s=I(t),i=I(`
          : `),u=I(o),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=v(e);s=D(a,t),i=D(a,`
          : `),u=D(a,o),a.forEach(p),this.h()},h(){d(e,"class","flex flex-1 justify-start font-mono")},m(l,a){j(l,e,a),h(e,s),h(e,i),h(e,u)},p(l,a){a&1&&t!==(t=Math.floor(l[0].currentTime/60)+"")&&K(s,t),a&1&&o!==(o=(l[0].currentTime%60<10?"0"+l[0].currentTime%60:l[0].currentTime%60)+"")&&K(u,o)},d(l){l&&p(e)}}}function Ve(r){let e,t=Math.floor(r[3]/60)+"",s,i,o=(Math.round(r[3]%60)<10?"0"+Math.round(r[3]%60):Math.round(r[3]%60))+"",u;return{c(){e=_("div"),s=I(t),i=I(`
          : `),u=I(o),this.h()},l(l){e=b(l,"DIV",{class:!0});var a=v(e);s=D(a,t),i=D(a,`
          : `),u=D(a,o),a.forEach(p),this.h()},h(){d(e,"class","flex flex-1 justify-end font-mono")},m(l,a){j(l,e,a),h(e,s),h(e,i),h(e,u)},p(l,a){a&8&&t!==(t=Math.floor(l[3]/60)+"")&&K(s,t),a&8&&o!==(o=(Math.round(l[3]%60)<10?"0"+Math.round(l[3]%60):Math.round(l[3]%60))+"")&&K(u,o)},d(l){l&&p(e)}}}function nt(r){let e,t,s,i,o,u,l,a,n,c,f,m,E,N,k,w,y,T,g,$,z,Z,F;s=new ot({props:{attempt:r[1]}});let A=r[0]&&Se(r),P=r[0]&&Ve(r);return{c(){e=_("footer"),t=_("div"),J(s.$$.fragment),i=S(),o=_("div"),u=_("div"),A&&A.c(),l=S(),a=_("div"),n=_("button"),c=G("svg"),f=G("path"),m=G("path"),N=S(),k=_("button"),w=G("svg"),y=G("path"),T=G("path"),$=S(),P&&P.c(),this.h()},l(M){e=b(M,"FOOTER",{class:!0});var C=v(e);t=b(C,"DIV",{class:!0});var H=v(t);x(s.$$.fragment,H),H.forEach(p),i=V(C),o=b(C,"DIV",{class:!0});var se=v(o);u=b(se,"DIV",{class:!0});var W=v(u);A&&A.l(W),l=V(W),a=b(W,"DIV",{class:!0});var B=v(a);n=b(B,"BUTTON",{title:!0,class:!0});var R=v(n);c=U(R,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0,xmlns:!0});var q=v(c);f=U(q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(f).forEach(p),m=U(q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(m).forEach(p),q.forEach(p),R.forEach(p),N=V(B),k=b(B,"BUTTON",{title:!0,class:!0});var Q=v(k);w=U(Q,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var re=v(w);y=U(re,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(y).forEach(p),T=U(re,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(T).forEach(p),re.forEach(p),Q.forEach(p),B.forEach(p),$=V(W),P&&P.l(W),W.forEach(p),se.forEach(p),C.forEach(p),this.h()},h(){d(t,"class","border-b"),d(f,"stroke-linecap","round"),d(f,"stroke-linejoin","round"),d(f,"stroke-width","2"),d(f,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),d(m,"stroke-linecap","round"),d(m,"stroke-linejoin","round"),d(m,"stroke-width","2"),d(m,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),d(c,"class","w-14 h-14 mx-auto"),d(c,"fill","none"),d(c,"stroke","currentColor"),d(c,"viewBox","0 0 24 24"),d(c,"xmlns","http://www.w3.org/2000/svg"),d(n,"title","Play Song"),d(n,"class",E=`hover:text-green-600 transition-colors duration-200 ${r[2]?"":"hidden"}`),d(y,"stroke-linecap","round"),d(y,"stroke-linejoin","round"),d(y,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),d(T,"stroke-linecap","round"),d(T,"stroke-linejoin","round"),d(T,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),d(w,"xmlns","http://www.w3.org/2000/svg"),d(w,"class","w-14 h-14 mx-auto"),d(w,"fill","none"),d(w,"viewBox","0 0 24 24"),d(w,"stroke","currentColor"),d(w,"stroke-width","2"),d(k,"title","Pause Song"),d(k,"class",g=`hover:text-green-600 transition-colors duration-200 ${r[2]?"hidden":""}`),d(a,"class","text-center flex-1 justify-center"),d(u,"class","flex justify-evenly items-center w-full"),d(o,"class","max-w-screen-md mx-auto p-3"),d(e,"class","border-t border-gray-500 bottom-0 w-full fixed bg-gray-800")},m(M,C){j(M,e,C),h(e,t),ee(s,t,null),h(e,i),h(e,o),h(o,u),A&&A.m(u,null),h(u,l),h(u,a),h(a,n),h(n,c),h(c,f),h(c,m),h(a,N),h(a,k),h(k,w),h(w,y),h(w,T),h(u,$),P&&P.m(u,null),z=!0,Z||(F=[ae(n,"click",r[4]),ae(k,"click",r[5])],Z=!0)},p(M,[C]){const H={};C&2&&(H.attempt=M[1]),s.$set(H),M[0]?A?A.p(M,C):(A=Se(M),A.c(),A.m(u,l)):A&&(A.d(1),A=null),(!z||C&4&&E!==(E=`hover:text-green-600 transition-colors duration-200 ${M[2]?"":"hidden"}`))&&d(n,"class",E),(!z||C&4&&g!==(g=`hover:text-green-600 transition-colors duration-200 ${M[2]?"hidden":""}`))&&d(k,"class",g),M[0]?P?P.p(M,C):(P=Ve(M),P.c(),P.m(u,null)):P&&(P.d(1),P=null)},i(M){z||(L(s.$$.fragment,M),z=!0)},o(M){O(s.$$.fragment,M),z=!1},d(M){M&&p(e),te(s),A&&A.d(),P&&P.d(),Z=!1,He(F)}}}function it(r,e,t){let s,i={attempts:0,guesses:[],correct:!1,date:new Date},o=!0,u=0;return Ye(()=>{t(1,i=Y.get()),t(0,s=new Audio(le.get().preview)),s.addEventListener("loadedmetadata",()=>t(3,u=s.duration))}),Y.listen(n=>t(1,i=n)),le.listen(n=>t(0,s=new Audio(n.preview))),ce.listen(n=>t(2,o=n)),[s,i,o,u,()=>{ce.set(!1),s.play();let n=12-i.attempts*6;const c=.08333333;switch(i.attempts){case 0:n=c;break;case 1:n=c*2;break;case 2:n=c*4;break;case 3:n=.5;break;case 4:n=.75;break;default:n=1;break}const f=i.correct?s.duration*1e3:s.duration/2*1e3*n;setTimeout(()=>{s.pause(),t(0,s.currentTime=0,s),ce.set(!0)},f)},()=>{s.pause(),t(0,s.currentTime=0,s),ce.set(!0)}]}class ct extends oe{constructor(e){super();ne(this,e,it,nt,ie,{})}}function ut(r){let e,t,s,i,o;const u=r[5].default,l=Ke(u,r,r[4],null);return{c(){e=_("button"),l&&l.c(),this.h()},l(a){e=b(a,"BUTTON",{title:!0,class:!0});var n=v(e);l&&l.l(n),n.forEach(p),this.h()},h(){d(e,"title",r[1]),d(e,"class",t=`p-2 text-white ${r[2]} rounded-md shadow hover:shadow-lg transition-all duration-200 ${r[0]}`)},m(a,n){j(a,e,n),l&&l.m(e,null),s=!0,i||(o=ae(e,"click",r[6]),i=!0)},p(a,[n]){l&&l.p&&(!s||n&16)&&We(l,u,a,a[4],s?Qe(u,a[4],n,null):qe(a[4]),null),(!s||n&2)&&d(e,"title",a[1]),(!s||n&5&&t!==(t=`p-2 text-white ${a[2]} rounded-md shadow hover:shadow-lg transition-all duration-200 ${a[0]}`))&&d(e,"class",t)},i(a){s||(L(l,a),s=!0)},o(a){O(l,a),s=!1},d(a){a&&p(e),l&&l.d(a),i=!1,o()}}}function dt(r,e,t){let{$$slots:s={},$$scope:i}=e,{type:o}=e,{className:u=""}=e,{title:l}=e,a;switch(o){case"primary":a="bg-blue-600 hover:bg-blue-500";break;case"submit":a="bg-green-600 hover:bg-green-500";break;case"warning":a="bg-orange-600 hover:bg-orange-500";break;case"breaking":a="bg-red-600 hover:bg-red-500";break;default:a="bg-blue-600 hover:bg-blue-500";break}function n(c){Xe.call(this,r,c)}return r.$$set=c=>{"type"in c&&t(3,o=c.type),"className"in c&&t(0,u=c.className),"title"in c&&t(1,l=c.title),"$$scope"in c&&t(4,i=c.$$scope)},[u,l,a,o,i,s,n]}class pe extends oe{constructor(e){super();ne(this,e,dt,ut,ie,{type:3,className:0,title:1})}}function ft(r){let e;return{c(){e=I("sounds cool")},l(t){e=D(t,"sounds cool")},m(t,s){j(t,e,s)},d(t){t&&p(e)}}}function ht(r){let e,t,s,i,o,u,l,a,n,c,f,m,E,N,k,w,y,T,g,$,z,Z,F,A,P,M,C,H,se,W;return C=new pe({props:{type:"primary",$$slots:{default:[ft]},$$scope:{ctx:r}}}),C.$on("click",r[2]),{c(){e=_("div"),t=_("div"),s=S(),i=_("div"),o=_("div"),u=_("h1"),l=I("Instructions"),a=S(),n=_("div"),c=_("ul"),f=_("li"),m=_("span"),E=I("press the play button"),N=S(),k=_("li"),w=_("span"),y=I("listen to the song snippet"),T=S(),g=_("li"),$=_("span"),z=I("type the name of the song or song artist into the box"),Z=S(),F=_("li"),A=_("span"),P=I("if you get the song incorrect or press skip, more of the song will be revealed"),M=S(),J(C.$$.fragment),this.h()},l(B){e=b(B,"DIV",{});var R=v(e);t=b(R,"DIV",{class:!0}),v(t).forEach(p),s=V(R),i=b(R,"DIV",{class:!0});var q=v(i);o=b(q,"DIV",{class:!0});var Q=v(o);u=b(Q,"H1",{class:!0});var re=v(u);l=D(re,"Instructions"),re.forEach(p),a=V(Q),n=b(Q,"DIV",{class:!0});var me=v(n);c=b(me,"UL",{class:!0});var X=v(c);f=b(X,"LI",{});var ge=v(f);m=b(ge,"SPAN",{});var ve=v(m);E=D(ve,"press the play button"),ve.forEach(p),ge.forEach(p),N=V(X),k=b(X,"LI",{});var _e=v(k);w=b(_e,"SPAN",{});var be=v(w);y=D(be,"listen to the song snippet"),be.forEach(p),_e.forEach(p),T=V(X),g=b(X,"LI",{});var we=v(g);$=b(we,"SPAN",{});var ke=v($);z=D(ke,"type the name of the song or song artist into the box"),ke.forEach(p),we.forEach(p),Z=V(X),F=b(X,"LI",{});var $e=v(F);A=b($e,"SPAN",{});var ye=v(A);P=D(ye,"if you get the song incorrect or press skip, more of the song will be revealed"),ye.forEach(p),$e.forEach(p),X.forEach(p),me.forEach(p),M=V(Q),x(C.$$.fragment,Q),Q.forEach(p),q.forEach(p),R.forEach(p),this.h()},h(){d(t,"class","flex overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-40 justify-center items-center h-modal md:h-full md:inset-0 bg-black opacity-50"),d(u,"class","text-3xl"),d(c,"class","text-left"),d(n,"class","p-4"),d(o,"class","relative rounded-lg bg-gray-700 p-3 opacity-100 shadow"),d(i,"class","relative px-4 w-full max-w-2xl h-full md:h-auto mx-auto z-50"),Ee(e,"hidden",r[0])},m(B,R){j(B,e,R),h(e,t),h(e,s),h(e,i),h(i,o),h(o,u),h(u,l),h(o,a),h(o,n),h(n,c),h(c,f),h(f,m),h(m,E),h(c,N),h(c,k),h(k,w),h(w,y),h(c,T),h(c,g),h(g,$),h($,z),h(c,Z),h(c,F),h(F,A),h(A,P),h(o,M),ee(C,o,null),H=!0,se||(W=ae(t,"click",r[1]),se=!0)},p(B,[R]){const q={};R&8&&(q.$$scope={dirty:R,ctx:B}),C.$set(q),R&1&&Ee(e,"hidden",B[0])},i(B){H||(L(C.$$.fragment,B),H=!0)},o(B){O(C.$$.fragment,B),H=!1},d(B){B&&p(e),te(C),se=!1,W()}}}function pt(r,e,t){let{hidden:s=!0}=e;const i=()=>t(0,s=!0),o=()=>{t(0,s=!0),Ue.set(!0)};return r.$$set=u=>{"hidden"in u&&t(0,s=u.hidden)},[s,i,o]}class mt extends oe{constructor(e){super();ne(this,e,pt,ht,ie,{hidden:0})}}const Ne=async()=>{const r=new URLSearchParams;r.append("grant_type","client_credentials");const e=new Headers;e.append("Authorization","Basic ZTA2MjNlNTk1YjZkNGI2YTg5M2FlMDk5YzUzYzE3NWY6MzMwNDRmYTNmZTY3NDEzNmFhOWVmZDIyZjI0MGMyZjc="),e.append("Content-Type","application/x-www-form-urlencoded");const s=await(await fetch("https://accounts.spotify.com/api/token",{method:"POST",body:r,redirect:"follow",headers:e})).json();return{token:s.access_token,expires_at:new Date(Date.now()+s.expires_in*1e3),type:s.type}},gt=async(r,e)=>await(await fetch(`https://api.spotify.com/v1/playlists/${r}/`,{headers:{accept:"application/json",authorization:`Bearer ${e}`},method:"GET"})).json(),vt=async(r,e)=>{let t=r.tracks.items,s=r.tracks.next;for(;s;){const o=await(await fetch(s,{headers:{accept:"application/json",authorization:`Bearer ${e}`},method:"GET"})).json();if(o.error)throw new Error(`Oops! ${o.error.status}: ${o.error.message}`);t=t.concat(o.items),s=o.next,t.push(o.items)}return t=t.filter(i=>i.track&&i.track.preview_url),t.map(i=>i.track)},_t=async(r,e)=>{const t=new Date,s=e?Math.random()*10*(Math.random()+20):0;Ie.use(Je(parseInt(t.toLocaleDateString().replace(new RegExp("/","g"),""))+s));const i=Ie.int(0,r.length-1);return r[i]},fe=r=>({name:r.name,artist:r.artists?r.artists[0].name:"unknown artist",id:r.id,preview:r.preview_url}),Ze=(r,e)=>{const t=Math.abs(r.getTime()-e.getTime());return Math.ceil(t/(1e3*60*60*24))};function Me(r,e,t){const s=r.slice();return s[18]=e[t],s}function je(r,e,t){const s=r.slice();return s[18]=e[t],s}function Ae(r){let e,t,s;return{c(){e=_("div"),t=_("span"),s=I("listen to the song and try to guess it correctly. you have 6 attempts."),this.h()},l(i){e=b(i,"DIV",{class:!0});var o=v(e);t=b(o,"SPAN",{class:!0});var u=v(t);s=D(u,"listen to the song and try to guess it correctly. you have 6 attempts."),u.forEach(p),o.forEach(p),this.h()},h(){d(t,"class","text-center mx-auto w-full text-blue-100"),d(e,"class","w-full px-0 sm:px-20 transition-all duration-200")},m(i,o){j(i,e,o),h(e,t),h(t,s)},d(i){i&&p(e)}}}function Ce(r){let e,t,s=r[2].guesses.filter(Re),i=[];for(let l=0;l<s.length;l+=1)i[l]=Pe(je(r,s,l));let o=r[2].guesses.filter(Oe),u=[];for(let l=0;l<o.length;l+=1)u[l]=ze(Me(r,o,l));return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=S();for(let l=0;l<u.length;l+=1)u[l].c();t=De()},l(l){for(let a=0;a<i.length;a+=1)i[a].l(l);e=V(l);for(let a=0;a<u.length;a+=1)u[a].l(l);t=De()},m(l,a){for(let n=0;n<i.length;n+=1)i[n].m(l,a);j(l,e,a);for(let n=0;n<u.length;n+=1)u[n].m(l,a);j(l,t,a)},p(l,a){if(a&4){s=l[2].guesses.filter(Re);let n;for(n=0;n<s.length;n+=1){const c=je(l,s,n);i[n]?i[n].p(c,a):(i[n]=Pe(c),i[n].c(),i[n].m(e.parentNode,e))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}if(a&4){o=l[2].guesses.filter(Oe);let n;for(n=0;n<o.length;n+=1){const c=Me(l,o,n);u[n]?u[n].p(c,a):(u[n]=ze(c),u[n].c(),u[n].m(t.parentNode,t))}for(;n<u.length;n+=1)u[n].d(1);u.length=o.length}},d(l){Te(i,l),l&&p(e),Te(u,l),l&&p(t)}}}function Pe(r){let e,t=r[18].song.name+"",s,i,o=r[18].song.artist+"",u,l,a,n;function c(){return r[11](r[18])}return{c(){e=_("div"),s=I(t),i=I(" by "),u=I(o),this.h()},l(f){e=b(f,"DIV",{title:!0,class:!0});var m=v(e);s=D(m,t),i=D(m," by "),u=D(m,o),m.forEach(p),this.h()},h(){d(e,"title","Open in Spotify"),d(e,"class",l=`cursor-pointer ${r[18].artistCorrect?"border-amber-400":"border-red-600"} border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden`)},m(f,m){j(f,e,m),h(e,s),h(e,i),h(e,u),a||(n=ae(e,"click",c),a=!0)},p(f,m){r=f,m&4&&t!==(t=r[18].song.name+"")&&K(s,t),m&4&&o!==(o=r[18].song.artist+"")&&K(u,o),m&4&&l!==(l=`cursor-pointer ${r[18].artistCorrect?"border-amber-400":"border-red-600"} border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden`)&&d(e,"class",l)},d(f){f&&p(e),a=!1,n()}}}function ze(r){let e,t=r[18].song.name+"",s,i,o=r[18].song.artist+"",u,l,a,n;function c(){return r[12](r[18])}return{c(){e=_("div"),s=I(t),i=I(" by "),u=I(o),l=S(),this.h()},l(f){e=b(f,"DIV",{title:!0,class:!0});var m=v(e);s=D(m,t),i=D(m," by "),u=D(m,o),l=V(m),m.forEach(p),this.h()},h(){d(e,"title","Open in Spotify"),d(e,"class","cursor-pointer border-green-600 border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden")},m(f,m){j(f,e,m),h(e,s),h(e,i),h(e,u),h(e,l),a||(n=ae(e,"click",c),a=!0)},p(f,m){r=f,m&4&&t!==(t=r[18].song.name+"")&&K(s,t),m&4&&o!==(o=r[18].song.artist+"")&&K(u,o)},d(f){f&&p(e),a=!1,n()}}}function bt(r){let e,t,s,i=r[9]()+"",o,u,l,a=!r[0]&&Be(r),n=!r[0]&&Le(r);return{c(){e=_("div"),a&&a.c(),t=S(),s=_("span"),o=I(i),u=S(),n&&n.c(),this.h()},l(c){e=b(c,"DIV",{class:!0});var f=v(e);a&&a.l(f),t=V(f),s=b(f,"SPAN",{});var m=v(s);o=D(m,i),m.forEach(p),u=V(f),n&&n.l(f),f.forEach(p),this.h()},h(){d(e,"class","py-3")},m(c,f){j(c,e,f),a&&a.m(e,null),h(e,t),h(e,s),h(s,o),h(e,u),n&&n.m(e,null),l=!0},p(c,f){c[0]?a&&(a.d(1),a=null):a?a.p(c,f):(a=Be(c),a.c(),a.m(e,t)),c[0]?n&&(Fe(),O(n,1,1,()=>{n=null}),Ge()):n?(n.p(c,f),f&1&&L(n,1)):(n=Le(c),n.c(),L(n,1),n.m(e,null))},i(c){l||(L(n),l=!0)},o(c){O(n),l=!1},d(c){c&&p(e),a&&a.d(),n&&n.d()}}}function wt(r){let e,t,s,i,o,u,l;function a(c){r[13](c)}let n={name:"song-selection",className:"w-10/12",inputClassName:"border-gray-600 border-2 w-full h-8 px-2 py-5 rounded-sm bg-gray-900 hover:border-gray-400 focus:border-gray-400 outline-none transition-all duration-200",dropdownClassName:"p-0 bg-gray-900",placeholder:`${6-r[2].attempts} ${6-r[2].attempts!==1?"attempts":"attempt"} left`,items:r[3],minCharactersToSearch:2,searchFunction:r[8],labelFieldName:"name",valueFieldName:"id",showLoadingIndicator:!0,noInputStyles:!0,hideArrow:!0,$$slots:{loading:[Et],"no-results":[yt],item:[$t,({label:c,item:f})=>({16:c,17:f}),({label:c,item:f})=>(c?65536:0)|(f?131072:0)]},$$scope:{ctx:r}};return r[4]!==void 0&&(n.selectedItem=r[4]),t=new et({props:n}),tt.push(()=>st(t,"selectedItem",a)),u=new pe({props:{title:"Submit Song Guess",type:"primary",className:"w-full",$$slots:{default:[It]},$$scope:{ctx:r}}}),u.$on("click",r[7]),{c(){e=_("div"),J(t.$$.fragment),i=S(),o=_("div"),J(u.$$.fragment),this.h()},l(c){e=b(c,"DIV",{class:!0,title:!0});var f=v(e);x(t.$$.fragment,f),i=V(f),o=b(f,"DIV",{class:!0,title:!0});var m=v(o);x(u.$$.fragment,m),m.forEach(p),f.forEach(p),this.h()},h(){d(o,"class","w-2/12 pl-4 mt-0.5"),d(o,"title","guess selected song"),d(e,"class","flex my-6"),d(e,"title","guess a song")},m(c,f){j(c,e,f),ee(t,e,null),h(e,i),h(e,o),ee(u,o,null),l=!0},p(c,f){const m={};f&4&&(m.placeholder=`${6-c[2].attempts} ${6-c[2].attempts!==1?"attempts":"attempt"} left`),f&8&&(m.items=c[3]),f&8519680&&(m.$$scope={dirty:f,ctx:c}),!s&&f&16&&(s=!0,m.selectedItem=c[4],rt(()=>s=!1)),t.$set(m);const E={};f&8388608&&(E.$$scope={dirty:f,ctx:c}),u.$set(E)},i(c){l||(L(t.$$.fragment,c),L(u.$$.fragment,c),l=!0)},o(c){O(t.$$.fragment,c),O(u.$$.fragment,c),l=!1},d(c){c&&p(e),te(t),te(u)}}}function Be(r){let e,t,s=Ze(new Date,r[6])+"",i;return{c(){e=_("span"),t=I("audial #"),i=I(s),this.h()},l(o){e=b(o,"SPAN",{class:!0});var u=v(e);t=D(u,"audial #"),i=D(u,s),u.forEach(p),this.h()},h(){d(e,"class","my-2")},m(o,u){j(o,e,u),h(e,t),h(e,i)},p:he,d(o){o&&p(e)}}}function Le(r){let e,t,s,i,o,u,l;return t=new pe({props:{className:"block mx-auto",type:"submit",$$slots:{default:[kt]},$$scope:{ctx:r}}}),t.$on("click",r[10]),{c(){e=_("div"),J(t.$$.fragment),s=S(),i=_("p"),o=I("copied to clipboard."),this.h()},l(a){e=b(a,"DIV",{class:!0});var n=v(e);x(t.$$.fragment,n),s=V(n),i=b(n,"P",{class:!0});var c=v(i);o=D(c,"copied to clipboard."),c.forEach(p),n.forEach(p),this.h()},h(){d(i,"class",u=`${r[1]?"opacity-100":"opacity-0"} text-blue-100 font-semibold transition-all duration-500 my-2`),d(e,"class","w-full mx-auto my-2")},m(a,n){j(a,e,n),ee(t,e,null),h(e,s),h(e,i),h(i,o),l=!0},p(a,n){const c={};n&8388608&&(c.$$scope={dirty:n,ctx:a}),t.$set(c),(!l||n&2&&u!==(u=`${a[1]?"opacity-100":"opacity-0"} text-blue-100 font-semibold transition-all duration-500 my-2`))&&d(i,"class",u)},i(a){l||(L(t.$$.fragment,a),l=!0)},o(a){O(t.$$.fragment,a),l=!1},d(a){a&&p(e),te(t)}}}function kt(r){let e;return{c(){e=I("share")},l(t){e=D(t,"share")},m(t,s){j(t,e,s)},d(t){t&&p(e)}}}function $t(r){let e,t,s=r[17].name+"",i,o,u=r[17].artist+"",l;return{c(){e=_("div"),t=_("span"),i=I(s),o=I(" by "),l=I(u),this.h()},l(a){e=b(a,"DIV",{slot:!0,class:!0});var n=v(e);t=b(n,"SPAN",{});var c=v(t);i=D(c,s),o=D(c," by "),l=D(c,u),c.forEach(p),n.forEach(p),this.h()},h(){d(e,"slot","item"),d(e,"class","border-2 h-10 px-2 py-3 w-full text-left rounded-sm bg-gray-900 text-white hover:text-blue-500 hover:border-blue-500 overflow-ellipsis whitespace-nowrap overflow-hidden transition-colors duration-150")},m(a,n){j(a,e,n),h(e,t),h(t,i),h(t,o),h(t,l)},p(a,n){n&131072&&s!==(s=a[17].name+"")&&K(i,s),n&131072&&u!==(u=a[17].artist+"")&&K(l,u)},d(a){a&&p(e)}}}function yt(r){let e,t,s;return{c(){e=_("div"),t=_("span"),s=I("could not find this song in our list."),this.h()},l(i){e=b(i,"DIV",{slot:!0,class:!0});var o=v(e);t=b(o,"SPAN",{});var u=v(t);s=D(u,"could not find this song in our list."),u.forEach(p),o.forEach(p),this.h()},h(){d(e,"slot","no-results"),d(e,"class","py-1")},m(i,o){j(i,e,o),h(e,t),h(t,s)},d(i){i&&p(e)}}}function Et(r){let e,t,s;return{c(){e=_("div"),t=_("span"),s=I("searching for songs..."),this.h()},l(i){e=b(i,"DIV",{slot:!0,class:!0});var o=v(e);t=b(o,"SPAN",{});var u=v(t);s=D(u,"searching for songs..."),u.forEach(p),o.forEach(p),this.h()},h(){d(e,"slot","loading"),d(e,"class","py-1")},m(i,o){j(i,e,o),h(e,t),h(t,s)},d(i){i&&p(e)}}}function It(r){let e,t;return{c(){e=G("svg"),t=G("path"),this.h()},l(s){e=U(s,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var i=v(e);t=U(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(p),i.forEach(p),this.h()},h(){d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"d","M13 7l5 5m0 0l-5 5m5-5H6"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"class","h-6 w-6 mx-auto"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke","currentColor"),d(e,"stroke-width","2")},m(s,i){j(s,e,i),h(e,t)},d(s){s&&p(e)}}}function Dt(r){let e,t,s,i,o,u,l,a,n;t=new mt({props:{hidden:r[5]}});let c=r[2].attempts===0&&Ae(),f=r[2].guesses&&Ce(r);const m=[wt,bt],E=[];function N(k,w){return k[2].attempts<6&&!k[2].correct?0:1}return l=N(r),a=E[l]=m[l](r),{c(){e=_("div"),J(t.$$.fragment),s=S(),c&&c.c(),i=S(),o=_("div"),f&&f.c(),u=S(),a.c(),this.h()},l(k){e=b(k,"DIV",{});var w=v(e);x(t.$$.fragment,w),s=V(w),c&&c.l(w),i=V(w),o=b(w,"DIV",{class:!0});var y=v(o);f&&f.l(y),u=V(y),a.l(y),y.forEach(p),w.forEach(p),this.h()},h(){d(o,"class","w-full px-0 transition-all sm:px-20 items-center game")},m(k,w){j(k,e,w),ee(t,e,null),h(e,s),c&&c.m(e,null),h(e,i),h(e,o),f&&f.m(o,null),h(o,u),E[l].m(o,null),n=!0},p(k,[w]){const y={};w&32&&(y.hidden=k[5]),t.$set(y),k[2].attempts===0?c||(c=Ae(),c.c(),c.m(e,i)):c&&(c.d(1),c=null),k[2].guesses?f?f.p(k,w):(f=Ce(k),f.c(),f.m(o,u)):f&&(f.d(1),f=null);let T=l;l=N(k),l===T?E[l].p(k,w):(Fe(),O(E[T],1,1,()=>{E[T]=null}),Ge(),a=E[l],a?a.p(k,w):(a=E[l]=m[l](k),a.c()),L(a,1),a.m(o,null))},i(k){n||(L(t.$$.fragment,k),L(a),n=!0)},o(k){O(t.$$.fragment,k),O(a),n=!1},d(k){k&&p(e),te(t),c&&c.d(),f&&f.d(),E[l].d()}}}const Re=r=>!r.correct,Oe=r=>r.correct;function Tt(r,e,t){let s;xe(r,Ue,g=>t(5,s=g));const i=new Date(1648594699909);let o=!1,u=!1,l={},a={},n=[];Ye(async()=>{let g=de.get();g.token||(g=await Ne(),de.set(g)),new Date(g.expires_at)<new Date&&(g=await Ne(),de.set(g)),a=await gt("5LQuCyn8AhcHpl31DgLaxL",g.token),t(0,o=new URL(window.location.href).searchParams.get("random")==="true"),n=await vt(a,g.token);const $=await _t(n,o);if(new Date(Y.get().date)!==new Date||o){const z=fe($);Y.set({guesses:[],date:new Date,correct:!1,attempts:0}),le.set(z)}t(2,l=Y.get())}),Y.listen(g=>t(2,l=g));let c=[],f={};const m=()=>{if(!f)return;const g=[...l.guesses||[]];if(f.id===le.get().id)g.push({song:le.get(),correct:!0,artistCorrect:!0}),Y.setKey("guesses",g),Y.setKey("correct",!0),Y.setKey("attempts",l.attempts+1);else{const $=n.find(z=>z.id==f.id);g.push({song:fe($),correct:!1,artistCorrect:f.artist.includes(le.get().artist)}),Y.setKey("guesses",g),Y.setKey("attempts",l.attempts+1)}t(4,f=void 0),ce.set(!0)},E=async g=>(t(3,c=n.filter($=>($.name+" "+$.artists[0].name).toLowerCase().includes(g.toLowerCase()))),t(3,c=c.map($=>fe($))),c),N=()=>{let g="";for(const $ of l.guesses||[])$.correct?g+="\u{1F7E9} ":$.artistCorrect?g+="\u{1F7E8} ":g+="\u{1F7E5} ";for(let $=0;$<6-l.attempts;$++)g+="\u2B1B ";return g},k=()=>{let g="audial #"+Ze(new Date,i);g+=`
`+N(),g+=`
https://audial.mogdan.xyz`,navigator.clipboard.writeText(g),t(1,u=!0)},w=g=>{window.open(`https://open.spotify.com/track/${g.song.id}`,"_blank").focus()},y=g=>{window.open(`https://open.spotify.com/track/${g.song.id}`,"_blank").focus()};function T(g){f=g,t(4,f)}return[o,u,l,c,f,s,i,m,E,N,k,w,y,T]}class St extends oe{constructor(e){super();ne(this,e,Tt,Dt,ie,{})}}function Vt(r){let e,t,s,i,o,u,l,a,n,c,f,m,E,N,k;return o=new St({}),l=new ct({}),{c(){e=_("div"),t=_("div"),s=_("div"),i=_("div"),J(o.$$.fragment),u=S(),J(l.$$.fragment),n=S(),c=_("div"),f=G("svg"),m=G("circle"),E=G("animateTransform"),this.h()},l(w){e=b(w,"DIV",{});var y=v(e);t=b(y,"DIV",{class:!0});var T=v(t);s=b(T,"DIV",{class:!0});var g=v(s);i=b(g,"DIV",{class:!0});var $=v(i);x(o.$$.fragment,$),$.forEach(p),g.forEach(p),u=V(T),x(l.$$.fragment,T),T.forEach(p),n=V(y),c=b(y,"DIV",{class:!0});var z=v(c);f=U(z,"svg",{xmlns:!0,"xmlns:xlink":!0,style:!0,width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0});var Z=v(f);m=U(Z,"circle",{cx:!0,cy:!0,fill:!0,stroke:!0,"stroke-width":!0,r:!0,"stroke-dasharray":!0});var F=v(m);E=U(F,"animateTransform",{attributeName:!0,type:!0,repeatCount:!0,dur:!0,values:!0,keyTimes:!0}),v(E).forEach(p),F.forEach(p),Z.forEach(p),z.forEach(p),y.forEach(p),this.h()},h(){d(i,"class","text-center p-3"),d(s,"class","max-w-screen-md mx-auto"),d(t,"class",a=`${r[0]?"hidden":""}`),d(E,"attributeName","transform"),d(E,"type","rotate"),d(E,"repeatCount","indefinite"),d(E,"dur","0.9345794392523364s"),d(E,"values","0 50 50;360 50 50"),d(E,"keyTimes","0;1"),d(m,"cx","50"),d(m,"cy","50"),d(m,"fill","none"),d(m,"stroke","currentColor"),d(m,"stroke-width","7"),d(m,"r","38"),d(m,"stroke-dasharray","179.0707812546182 61.690260418206066"),d(f,"xmlns","http://www.w3.org/2000/svg"),d(f,"xmlns:xlink","http://www.w3.org/1999/xlink"),ue(f,"margin","auto"),ue(f,"background","transparent"),ue(f,"display","block"),ue(f,"shape-rendering","auto"),d(f,"width","100px"),d(f,"height","100px"),d(f,"viewBox","0 0 100 100"),d(f,"preserveAspectRatio","xMidYMid"),d(c,"class",N=`w-full mx-auto text-center mt-20 ${r[0]?"":"hidden"} text-blue-600`)},m(w,y){j(w,e,y),h(e,t),h(t,s),h(s,i),ee(o,i,null),h(t,u),ee(l,t,null),h(e,n),h(e,c),h(c,f),h(f,m),h(m,E),k=!0},p(w,[y]){(!k||y&1&&a!==(a=`${w[0]?"hidden":""}`))&&d(t,"class",a),(!k||y&1&&N!==(N=`w-full mx-auto text-center mt-20 ${w[0]?"":"hidden"} text-blue-600`))&&d(c,"class",N)},i(w){k||(L(o.$$.fragment,w),L(l.$$.fragment,w),k=!0)},o(w){O(o.$$.fragment,w),O(l.$$.fragment,w),k=!1},d(w){w&&p(e),te(o),te(l)}}}function Nt(r,e,t){let s=!0;return Y.listen(i=>{i.date&&t(0,s=!1)}),[s]}class At extends oe{constructor(e){super();ne(this,e,Nt,Vt,ie,{})}}export{At as default};
