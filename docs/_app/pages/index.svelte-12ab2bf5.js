import{S as Y,i as j,s as z,e as x,w as S,k as T,c as I,a as _,x as D,d as m,m as V,b as l,g as b,I as w,y as B,q as h,o as g,B as G,G as M,H as q,f as y,p as J,v as K,n as N}from"../chunks/index-b7303fea.js";import{I as O,g as Q,G as W,F as X}from"../chunks/spotify-8734f69d.js";import{r as A,c as Z}from"../chunks/store-2c78cdb7.js";import{c as P}from"../chunks/util-9cdfb41e.js";import"../chunks/SvelteToast.svelte_svelte_type_style_lang-d8fc43ab.js";import"../chunks/index-684da568.js";function C(u){let r,t,o,c,i,s,a;return o=new W({props:{custom:!1,forceRandom:u[3],allTracks:u[2]}}),s=new X({props:{custom:u[3]}}),{c(){r=x("div"),t=x("div"),S(o.$$.fragment),i=T(),S(s.$$.fragment),this.h()},l(e){r=I(e,"DIV",{class:!0});var n=_(r);t=I(n,"DIV",{class:!0});var f=_(t);D(o.$$.fragment,f),f.forEach(m),n.forEach(m),i=V(e),D(s.$$.fragment,e),this.h()},h(){l(t,"class",c=`text-center p-3 ${u[1]?"":"hidden"}`),l(r,"class","max-w-screen-md mx-auto")},m(e,n){b(e,r,n),w(r,t),B(o,t,null),b(e,i,n),B(s,e,n),a=!0},p(e,n){const f={};n&8&&(f.forceRandom=e[3]),n&4&&(f.allTracks=e[2]),o.$set(f),(!a||n&2&&c!==(c=`text-center p-3 ${e[1]?"":"hidden"}`))&&l(t,"class",c);const d={};n&8&&(d.custom=e[3]),s.$set(d)},i(e){a||(h(o.$$.fragment,e),h(s.$$.fragment,e),a=!0)},o(e){g(o.$$.fragment,e),g(s.$$.fragment,e),a=!1},d(e){e&&m(r),G(o),e&&m(i),G(s,e)}}}function F(u){let r,t,o,c;return{c(){r=x("div"),t=M("svg"),o=M("circle"),this.h()},l(i){r=I(i,"DIV",{class:!0});var s=_(r);t=q(s,"svg",{xmlns:!0,class:!0,style:!0,width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0});var a=_(t);o=q(a,"circle",{cx:!0,cy:!0,fill:!0,stroke:!0,"stroke-width":!0,r:!0,"stroke-dasharray":!0}),_(o).forEach(m),a.forEach(m),s.forEach(m),this.h()},h(){l(o,"cx","50"),l(o,"cy","50"),l(o,"fill","none"),l(o,"stroke","currentColor"),l(o,"stroke-width","7"),l(o,"r","38"),l(o,"stroke-dasharray","179.0707812546182 61.690260418206066"),l(t,"xmlns","http://www.w3.org/2000/svg"),l(t,"class","animate-spin"),y(t,"margin","auto"),y(t,"background","transparent"),y(t,"display","block"),y(t,"shape-rendering","auto"),l(t,"width","100px"),l(t,"height","100px"),l(t,"viewBox","0 0 100 100"),l(t,"preserveAspectRatio","xMidYMid"),l(r,"class",c="w-full mx-auto text-center mt-20 text-blue-600")},m(i,s){b(i,r,s),w(r,t),w(t,o)},d(i){i&&m(r)}}}function ee(u){let r,t,o,c,i;t=new O({props:{hidden:u[1]}});let s=!u[0]&&C(u),a=u[0]&&F();return{c(){r=x("div"),S(t.$$.fragment),o=T(),s&&s.c(),c=T(),a&&a.c()},l(e){r=I(e,"DIV",{});var n=_(r);D(t.$$.fragment,n),o=V(n),s&&s.l(n),c=V(n),a&&a.l(n),n.forEach(m)},m(e,n){b(e,r,n),B(t,r,null),w(r,o),s&&s.m(r,null),w(r,c),a&&a.m(r,null),i=!0},p(e,[n]){const f={};n&2&&(f.hidden=e[1]),t.$set(f),e[0]?s&&(N(),g(s,1,1,()=>{s=null}),J()):s?(s.p(e,n),n&1&&h(s,1)):(s=C(e),s.c(),h(s,1),s.m(r,c)),e[0]?a||(a=F(),a.c(),a.m(r,null)):a&&(a.d(1),a=null)},i(e){i||(h(t.$$.fragment,e),h(s),i=!0)},o(e){g(t.$$.fragment,e),g(s),i=!1},d(e){e&&m(r),G(t),s&&s.d(),a&&a.d()}}}function te(u,r,t){var o=this&&this.__awaiter||function(n,f,d,$){function H(v){return v instanceof d?v:new d(function(k){k(v)})}return new(d||(d=Promise))(function(v,k){function L(p){try{R($.next(p))}catch(E){k(E)}}function U(p){try{R($.throw(p))}catch(E){k(E)}}function R(p){p.done?v(p.value):H(p.value).then(L,U)}R(($=$.apply(n,f||[])).next())})};let c=!0,i,s,a,e;return K(()=>o(void 0,void 0,void 0,function*(){t(1,i=A.get()),t(3,e=new URL(window.location.href).searchParams.get("random")==="true"||!1);const n=yield Q("",e);a=n.daily,t(2,s=n.tracks);const f=P(a);Z.set(f),t(0,c=!1)})),A.listen(n=>{t(1,i=n)}),[c,i,s,e]}class le extends Y{constructor(r){super(),j(this,r,te,ee,z,{})}}export{le as default};
