import{S as oe,i as ne,s as ie,e as b,k as N,c as w,a as _,d as p,m as T,b as u,g as A,H as h,K as de,t as S,h as V,j as se,w as X,F as K,x as Z,G as U,y as J,I as ae,q as z,o as H,B as x,L as Ye,v as pe,V as fe,N as qe,O as Qe,P as We,Q as Xe,W as Ze,n as Ge,p as Ke,l as Ve,X as Ne,Y as Je,Z as xe,_ as et,$ as tt,a0 as Te,f as ue}from"../chunks/vendor-67da8f4d.js";import{c as B,a as W,s as ce,r as me}from"../chunks/store-c1cd792c.js";function st(l){let e,t,s,r,a,n,c,i,o,d,f,m,v,g,k,I,$,D;return{c(){e=b("div"),t=b("div"),r=N(),a=b("div"),c=N(),i=b("div"),d=N(),f=b("div"),v=N(),g=b("div"),I=N(),$=b("div"),this.h()},l(y){e=w(y,"DIV",{class:!0});var E=_(e);t=w(E,"DIV",{class:!0}),_(t).forEach(p),r=T(E),a=w(E,"DIV",{class:!0}),_(a).forEach(p),c=T(E),i=w(E,"DIV",{class:!0}),_(i).forEach(p),d=T(E),f=w(E,"DIV",{class:!0}),_(f).forEach(p),v=T(E),g=w(E,"DIV",{class:!0}),_(g).forEach(p),I=T(E),$=w(E,"DIV",{class:!0}),_($).forEach(p),E.forEach(p),this.h()},h(){u(t,"class",s=`w-2/12 ${l[1](0,l[0].attempts)} border-r border-l`),u(a,"class",n=`w-2/12 ${l[1](1,l[0].attempts)} border-r border-l`),u(i,"class",o=`w-4/12 ${l[1](2,l[0].attempts)} border-r border-l`),u(f,"class",m=`w-4/12 ${l[1](3,l[0].attempts)} border-r border-l`),u(g,"class",k=`w-6/12 ${l[1](4,l[0].attempts)} border-r border-l`),u($,"class",D=`w-6/12 ${l[1](5,l[0].attempts)} border-r border-l`),u(e,"class","max-w-3xl mx-auto flex h-3")},m(y,E){A(y,e,E),h(e,t),h(e,r),h(e,a),h(e,c),h(e,i),h(e,d),h(e,f),h(e,v),h(e,g),h(e,I),h(e,$)},p(y,[E]){E&1&&s!==(s=`w-2/12 ${y[1](0,y[0].attempts)} border-r border-l`)&&u(t,"class",s),E&1&&n!==(n=`w-2/12 ${y[1](1,y[0].attempts)} border-r border-l`)&&u(a,"class",n),E&1&&o!==(o=`w-4/12 ${y[1](2,y[0].attempts)} border-r border-l`)&&u(i,"class",o),E&1&&m!==(m=`w-4/12 ${y[1](3,y[0].attempts)} border-r border-l`)&&u(f,"class",m),E&1&&k!==(k=`w-6/12 ${y[1](4,y[0].attempts)} border-r border-l`)&&u(g,"class",k),E&1&&D!==(D=`w-6/12 ${y[1](5,y[0].attempts)} border-r border-l`)&&u($,"class",D)},i:de,o:de,d(y){y&&p(e)}}}function rt(l,e,t){let{attempt:s}=e;const r=(a,n)=>{let c="bg-black opacity-40";return n===a&&!s.correct?c="bg-blue-500":n===a+1&&s.correct?c="bg-green-600":n>a&&s.guesses[a].artistCorrect?c="bg-amber-400":n>a&&(c="bg-red-600"),c};return l.$$set=a=>{"attempt"in a&&t(0,s=a.attempt)},[s,r]}class lt extends oe{constructor(e){super();ne(this,e,rt,st,ie,{attempt:0})}}function Ae(l){let e,t;return{c(){e=b("div"),t=S(l[4]),this.h()},l(s){e=w(s,"DIV",{class:!0});var r=_(e);t=V(r,l[4]),r.forEach(p),this.h()},h(){u(e,"class","flex flex-1 justify-start font-mono")},m(s,r){A(s,e,r),h(e,t)},p(s,r){r&16&&se(t,s[4])},d(s){s&&p(e)}}}function Ce(l){let e,t=Math.floor(l[3]/60)+":"+(Math.round(l[3]%60)<10?"0"+Math.round(l[3]%60):Math.round(l[3]%60)),s;return{c(){e=b("div"),s=S(t),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=_(e);s=V(a,t),a.forEach(p),this.h()},h(){u(e,"class","flex flex-1 justify-end font-mono")},m(r,a){A(r,e,a),h(e,s)},p(r,a){a&8&&t!==(t=Math.floor(r[3]/60)+":"+(Math.round(r[3]%60)<10?"0"+Math.round(r[3]%60):Math.round(r[3]%60)))&&se(s,t)},d(r){r&&p(e)}}}function at(l){let e,t,s,r,a,n,c,i,o,d,f,m,v,g,k,I,$,D,y,E,F,Y,G;s=new lt({props:{attempt:l[1]}});let M=l[0]&&Ae(l),j=l[0]&&Ce(l);return{c(){e=b("footer"),t=b("div"),X(s.$$.fragment),r=N(),a=b("div"),n=b("div"),M&&M.c(),c=N(),i=b("div"),o=b("button"),d=K("svg"),f=K("path"),m=K("path"),g=N(),k=b("button"),I=K("svg"),$=K("path"),D=K("path"),E=N(),j&&j.c(),this.h()},l(C){e=w(C,"FOOTER",{class:!0});var P=_(e);t=w(P,"DIV",{class:!0});var L=_(t);Z(s.$$.fragment,L),L.forEach(p),r=T(P),a=w(P,"DIV",{class:!0});var re=_(a);n=w(re,"DIV",{class:!0});var q=_(n);M&&M.l(q),c=T(q),i=w(q,"DIV",{class:!0});var le=_(i);o=w(le,"BUTTON",{title:!0,class:!0});var R=_(o);d=U(R,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0,xmlns:!0});var O=_(d);f=U(O,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(f).forEach(p),m=U(O,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(m).forEach(p),O.forEach(p),R.forEach(p),g=T(le),k=w(le,"BUTTON",{title:!0,class:!0});var ee=_(k);I=U(ee,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var Q=_(I);$=U(Q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_($).forEach(p),D=U(Q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(D).forEach(p),Q.forEach(p),ee.forEach(p),le.forEach(p),E=T(q),j&&j.l(q),q.forEach(p),re.forEach(p),P.forEach(p),this.h()},h(){u(t,"class","border-b"),u(f,"stroke-linecap","round"),u(f,"stroke-linejoin","round"),u(f,"stroke-width","2"),u(f,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),u(m,"stroke-linecap","round"),u(m,"stroke-linejoin","round"),u(m,"stroke-width","2"),u(m,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),u(d,"class","w-14 h-14 mx-auto"),u(d,"fill","none"),u(d,"stroke","currentColor"),u(d,"viewBox","0 0 24 24"),u(d,"xmlns","http://www.w3.org/2000/svg"),u(o,"title","Play Song"),u(o,"class",v=`hover:text-blue-600 transition-colors duration-200 ${l[2]?"":"hidden"}`),u($,"stroke-linecap","round"),u($,"stroke-linejoin","round"),u($,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),u(D,"stroke-linecap","round"),u(D,"stroke-linejoin","round"),u(D,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),u(I,"xmlns","http://www.w3.org/2000/svg"),u(I,"class","w-14 h-14 mx-auto"),u(I,"fill","none"),u(I,"viewBox","0 0 24 24"),u(I,"stroke","currentColor"),u(I,"stroke-width","2"),u(k,"title","Pause Song"),u(k,"class",y=`hover:text-blue-600 transition-colors duration-200 ${l[2]?"hidden":""}`),u(i,"class","text-center flex-1 justify-center"),u(n,"class","flex justify-evenly items-center w-full"),u(a,"class","max-w-screen-md mx-auto p-3"),u(e,"class","border-t border-gray-500 bottom-0 w-full fixed bg-gray-800")},m(C,P){A(C,e,P),h(e,t),J(s,t,null),h(e,r),h(e,a),h(a,n),M&&M.m(n,null),h(n,c),h(n,i),h(i,o),h(o,d),h(d,f),h(d,m),h(i,g),h(i,k),h(k,I),h(I,$),h(I,D),h(n,E),j&&j.m(n,null),F=!0,Y||(G=[ae(o,"click",l[5]),ae(k,"click",l[6])],Y=!0)},p(C,[P]){const L={};P&2&&(L.attempt=C[1]),s.$set(L),C[0]?M?M.p(C,P):(M=Ae(C),M.c(),M.m(n,c)):M&&(M.d(1),M=null),(!F||P&4&&v!==(v=`hover:text-blue-600 transition-colors duration-200 ${C[2]?"":"hidden"}`))&&u(o,"class",v),(!F||P&4&&y!==(y=`hover:text-blue-600 transition-colors duration-200 ${C[2]?"hidden":""}`))&&u(k,"class",y),C[0]?j?j.p(C,P):(j=Ce(C),j.c(),j.m(n,null)):j&&(j.d(1),j=null)},i(C){F||(z(s.$$.fragment,C),F=!0)},o(C){H(s.$$.fragment,C),F=!1},d(C){C&&p(e),x(s),M&&M.d(),j&&j.d(),Y=!1,Ye(G)}}}function ot(l,e,t){let s,r={attempts:0,guesses:[],correct:!1,date:new Date},a=!0,n=0,c="0:00",i;return pe(()=>{t(1,r=B.get()),t(0,s=new Audio(W.get().preview)),s.addEventListener("loadedmetadata",()=>t(3,n=s.duration)),navigator.mediaSession.setActionHandler("play",()=>null),navigator.mediaSession.setActionHandler("pause",()=>null),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",()=>null)}),B.listen(f=>t(1,r=f)),W.listen(f=>t(0,s=new Audio(f.preview))),ce.listen(f=>t(2,a=f)),[s,r,a,n,c,()=>{fe("play-song",{}),ce.set(!1),s.play(),t(4,c="0:00");let f=12-r.attempts*6;const m=.08333333;switch(r.attempts){case 0:f=m;break;case 1:f=m*2;break;case 2:f=m*4;break;case 3:f=.5;break;case 4:f=.75;break;default:f=1;break}const v=r.correct?s.duration*1e3:s.duration/2*1e3*f;setTimeout(()=>{s.pause(),t(0,s.currentTime=0,s),ce.set(!0),clearInterval(i)},v),i=setInterval(()=>{t(4,c=`${Math.floor(s.currentTime/60)}:${s.currentTime%60<10?"0"+Math.round(s.currentTime%60):Math.round(s.currentTime%60)}`)},1e3)},()=>{s.pause(),t(0,s.currentTime=0,s),ce.set(!0)}]}class nt extends oe{constructor(e){super();ne(this,e,ot,at,ie,{})}}const he=l=>({name:l.name,artist:l.artists?l.artists[0].name:"unknown artist",id:l.id,preview:l.preview_url}),Ue=(l,e)=>{const t=Math.abs(l.getTime()-e.getTime());return Math.ceil(t/(1e3*60*60*24))};function it(l){let e,t,s,r,a;const n=l[5].default,c=qe(n,l,l[4],null);return{c(){e=b("button"),c&&c.c(),this.h()},l(i){e=w(i,"BUTTON",{title:!0,class:!0});var o=_(e);c&&c.l(o),o.forEach(p),this.h()},h(){u(e,"title",l[1]),u(e,"class",t=`p-2 text-white ${l[2]} rounded-md shadow hover:shadow-lg transition-all duration-200 ${l[0]}`)},m(i,o){A(i,e,o),c&&c.m(e,null),s=!0,r||(a=ae(e,"click",l[6]),r=!0)},p(i,[o]){c&&c.p&&(!s||o&16)&&Qe(c,n,i,i[4],s?Xe(n,i[4],o,null):We(i[4]),null),(!s||o&2)&&u(e,"title",i[1]),(!s||o&5&&t!==(t=`p-2 text-white ${i[2]} rounded-md shadow hover:shadow-lg transition-all duration-200 ${i[0]}`))&&u(e,"class",t)},i(i){s||(z(c,i),s=!0)},o(i){H(c,i),s=!1},d(i){i&&p(e),c&&c.d(i),r=!1,a()}}}function ct(l,e,t){let{$$slots:s={},$$scope:r}=e,{type:a}=e,{className:n=""}=e,{title:c}=e,i;switch(a){case"primary":i="bg-blue-600 hover:bg-blue-500";break;case"submit":i="bg-green-600 hover:bg-green-500";break;case"warning":i="bg-orange-600 hover:bg-orange-500";break;case"breaking":i="bg-red-600 hover:bg-red-500";break;default:i="bg-blue-600 hover:bg-blue-500";break}function o(d){Ze.call(this,l,d)}return l.$$set=d=>{"type"in d&&t(3,a=d.type),"className"in d&&t(0,n=d.className),"title"in d&&t(1,c=d.title),"$$scope"in d&&t(4,r=d.$$scope)},[n,c,i,a,r,s,o]}class ge extends oe{constructor(e){super();ne(this,e,ct,it,ie,{type:3,className:0,title:1})}}function ut(l){let e,t=W.get().name+"",s,r,a=W.get().artist+"",n,c,i,o;return{c(){e=b("div"),s=S(t),r=S(" by "),n=S(a),this.h()},l(d){e=w(d,"DIV",{title:!0,class:!0});var f=_(e);s=V(f,t),r=V(f," by "),n=V(f,a),f.forEach(p),this.h()},h(){u(e,"title","Open in Spotify"),u(e,"class",c="cursor-pointer border-blue-600 border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden")},m(d,f){A(d,e,f),h(e,s),h(e,r),h(e,n),i||(o=ae(e,"click",l[5]),i=!0)},p:de,d(d){d&&p(e),i=!1,o()}}}function Me(l){let e,t,s=Ue(new Date,l[2])+"",r;return{c(){e=b("span"),t=S("audial #"),r=S(s),this.h()},l(a){e=w(a,"SPAN",{class:!0});var n=_(e);t=V(n,"audial #"),r=V(n,s),n.forEach(p),this.h()},h(){u(e,"class","my-2")},m(a,n){A(a,e,n),h(e,t),h(e,r)},p:de,d(a){a&&p(e)}}}function je(l){let e,t,s,r,a,n,c;return t=new ge({props:{title:"Share Score",className:"block mx-auto",type:"submit",$$slots:{default:[dt]},$$scope:{ctx:l}}}),t.$on("click",l[4]),{c(){e=b("div"),X(t.$$.fragment),s=N(),r=b("p"),a=S("copied to clipboard."),this.h()},l(i){e=w(i,"DIV",{class:!0});var o=_(e);Z(t.$$.fragment,o),s=T(o),r=w(o,"P",{class:!0});var d=_(r);a=V(d,"copied to clipboard."),d.forEach(p),o.forEach(p),this.h()},h(){u(r,"class",n=`${l[1]?"opacity-100":"opacity-0"} text-blue-100 font-semibold transition-all duration-500 my-2`),u(e,"class","w-full mx-auto my-2")},m(i,o){A(i,e,o),J(t,e,null),h(e,s),h(e,r),h(r,a),c=!0},p(i,o){const d={};o&64&&(d.$$scope={dirty:o,ctx:i}),t.$set(d),(!c||o&2&&n!==(n=`${i[1]?"opacity-100":"opacity-0"} text-blue-100 font-semibold transition-all duration-500 my-2`))&&u(r,"class",n)},i(i){c||(z(t.$$.fragment,i),c=!0)},o(i){H(t.$$.fragment,i),c=!1},d(i){i&&p(e),x(t)}}}function dt(l){let e;return{c(){e=S("share")},l(t){e=V(t,"share")},m(t,s){A(t,e,s)},d(t){t&&p(e)}}}function ft(l){let e,t=!B.get().correct,s,r,a,n=l[3]()+"",c,i,o,d=t&&ut(l),f=!l[0]&&Me(l),m=!l[0]&&je(l);return{c(){e=b("div"),d&&d.c(),s=N(),f&&f.c(),r=N(),a=b("span"),c=S(n),i=N(),m&&m.c(),this.h()},l(v){e=w(v,"DIV",{class:!0});var g=_(e);d&&d.l(g),s=T(g),f&&f.l(g),r=T(g),a=w(g,"SPAN",{});var k=_(a);c=V(k,n),k.forEach(p),i=T(g),m&&m.l(g),g.forEach(p),this.h()},h(){u(e,"class","py-3")},m(v,g){A(v,e,g),d&&d.m(e,null),h(e,s),f&&f.m(e,null),h(e,r),h(e,a),h(a,c),h(e,i),m&&m.m(e,null),o=!0},p(v,[g]){t&&d.p(v,g),v[0]?f&&(f.d(1),f=null):f?f.p(v,g):(f=Me(v),f.c(),f.m(e,r)),v[0]?m&&(Ge(),H(m,1,1,()=>{m=null}),Ke()):m?(m.p(v,g),g&1&&z(m,1)):(m=je(v),m.c(),z(m,1),m.m(e,null))},i(v){o||(z(m),o=!0)},o(v){H(m),o=!1},d(v){v&&p(e),d&&d.d(),f&&f.d(),m&&m.d()}}}function ht(l,e,t){let{forceRandom:s}=e,r=!1;const a=new Date("3/29/2022"),n=()=>{let o="";for(const d of B.get().guesses||[])d.correct?o+="\u{1F7E9} ":d.artistCorrect?o+="\u{1F7E8} ":o+="\u{1F7E5} ";for(let d=0;d<6-B.get().attempts;d++)o+="\u2B1B ";return o},c=()=>{let o="audial #"+Ue(new Date,a);o+=`
`+n(),o+=`
https://audial.mogdan.xyz`,navigator.clipboard.writeText(o),t(1,r=!0),fe("share-score",{result:n()})},i=()=>{window.open(`https://open.spotify.com/track/${W.get().id}`,"_blank").focus()};return l.$$set=o=>{"forceRandom"in o&&t(0,s=o.forceRandom)},[s,r,a,n,c,i]}class mt extends oe{constructor(e){super();ne(this,e,ht,ft,ie,{forceRandom:0})}}const pt=async(l,e)=>await(await fetch(`https://us-central1-audial-6e1bd.cloudfunctions.net/daily?playlist=${l.id}&random=${e}`,{method:"GET",cache:"reload"})).json();function Pe(l,e,t){const s=l.slice();return s[13]=e[t],s}function Le(l,e,t){const s=l.slice();return s[13]=e[t],s}function Re(l){let e,t,s;return{c(){e=b("div"),t=b("span"),s=S("listen to the song and try to guess it correctly. you have 6 attempts."),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=_(e);t=w(a,"SPAN",{class:!0});var n=_(t);s=V(n,"listen to the song and try to guess it correctly. you have 6 attempts."),n.forEach(p),a.forEach(p),this.h()},h(){u(t,"class","text-center mx-auto w-full text-blue-100"),u(e,"class","w-full px-0 sm:px-20 transition-all duration-200")},m(r,a){A(r,e,a),h(e,t),h(t,s)},d(r){r&&p(e)}}}function Be(l){let e,t,s=l[1].guesses.filter(He),r=[];for(let c=0;c<s.length;c+=1)r[c]=ze(Le(l,s,c));let a=l[1].guesses.filter(Fe),n=[];for(let c=0;c<a.length;c+=1)n[c]=Oe(Pe(l,a,c));return{c(){for(let c=0;c<r.length;c+=1)r[c].c();e=N();for(let c=0;c<n.length;c+=1)n[c].c();t=Ve()},l(c){for(let i=0;i<r.length;i+=1)r[i].l(c);e=T(c);for(let i=0;i<n.length;i+=1)n[i].l(c);t=Ve()},m(c,i){for(let o=0;o<r.length;o+=1)r[o].m(c,i);A(c,e,i);for(let o=0;o<n.length;o+=1)n[o].m(c,i);A(c,t,i)},p(c,i){if(i&2){s=c[1].guesses.filter(He);let o;for(o=0;o<s.length;o+=1){const d=Le(c,s,o);r[o]?r[o].p(d,i):(r[o]=ze(d),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=s.length}if(i&2){a=c[1].guesses.filter(Fe);let o;for(o=0;o<a.length;o+=1){const d=Pe(c,a,o);n[o]?n[o].p(d,i):(n[o]=Oe(d),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=a.length}},d(c){Ne(r,c),c&&p(e),Ne(n,c),c&&p(t)}}}function ze(l){let e,t=l[13].song.name+"",s,r,a=l[13].song.artist+"",n,c,i,o;function d(){return l[6](l[13])}return{c(){e=b("div"),s=S(t),r=S(" by "),n=S(a),this.h()},l(f){e=w(f,"DIV",{title:!0,class:!0});var m=_(e);s=V(m,t),r=V(m," by "),n=V(m,a),m.forEach(p),this.h()},h(){u(e,"title","Open in Spotify"),u(e,"class",c=`cursor-pointer ${l[13].artistCorrect?"border-amber-400":"border-red-600"} border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden`)},m(f,m){A(f,e,m),h(e,s),h(e,r),h(e,n),i||(o=ae(e,"click",d),i=!0)},p(f,m){l=f,m&2&&t!==(t=l[13].song.name+"")&&se(s,t),m&2&&a!==(a=l[13].song.artist+"")&&se(n,a),m&2&&c!==(c=`cursor-pointer ${l[13].artistCorrect?"border-amber-400":"border-red-600"} border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden`)&&u(e,"class",c)},d(f){f&&p(e),i=!1,o()}}}function Oe(l){let e,t=l[13].song.name+"",s,r,a=l[13].song.artist+"",n,c,i,o;function d(){return l[7](l[13])}return{c(){e=b("div"),s=S(t),r=S(" by "),n=S(a),c=N(),this.h()},l(f){e=w(f,"DIV",{title:!0,class:!0});var m=_(e);s=V(m,t),r=V(m," by "),n=V(m,a),c=T(m),m.forEach(p),this.h()},h(){u(e,"title","Open in Spotify"),u(e,"class","cursor-pointer border-green-600 border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden")},m(f,m){A(f,e,m),h(e,s),h(e,r),h(e,n),h(e,c),i||(o=ae(e,"click",d),i=!0)},p(f,m){l=f,m&2&&t!==(t=l[13].song.name+"")&&se(s,t),m&2&&a!==(a=l[13].song.artist+"")&&se(n,a)},d(f){f&&p(e),i=!1,o()}}}function gt(l){let e,t;return e=new mt({props:{forceRandom:l[0]}}),{c(){X(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,r){J(e,s,r),t=!0},p(s,r){const a={};r&1&&(a.forceRandom=s[0]),e.$set(a)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){x(e,s)}}}function vt(l){let e,t,s,r,a,n,c;function i(d){l[8](d)}let o={name:"song-selection",className:"w-10/12",inputClassName:"border-gray-600 border-2 w-full h-8 px-2 py-5 rounded-sm bg-gray-900 hover:border-gray-400 focus:border-gray-400 outline-none transition-all duration-200",dropdownClassName:"p-0 bg-gray-900",placeholder:`${6-l[1].attempts} ${6-l[1].attempts!==1?"attempts":"attempt"} left`,items:l[2],minCharactersToSearch:2,searchFunction:l[5],labelFieldName:"name",valueFieldName:"id",showLoadingIndicator:!0,noInputStyles:!0,hideArrow:!0,$$slots:{loading:[wt],"no-results":[bt],item:[_t,({label:d,item:f})=>({11:d,12:f}),({label:d,item:f})=>(d?2048:0)|(f?4096:0)]},$$scope:{ctx:l}};return l[3]!==void 0&&(o.selectedItem=l[3]),t=new Je({props:o}),xe.push(()=>et(t,"selectedItem",i)),n=new ge({props:{title:"Submit Song Guess",type:"primary",className:"w-full",$$slots:{default:[kt]},$$scope:{ctx:l}}}),n.$on("click",l[4]),{c(){e=b("div"),X(t.$$.fragment),r=N(),a=b("div"),X(n.$$.fragment),this.h()},l(d){e=w(d,"DIV",{class:!0,title:!0});var f=_(e);Z(t.$$.fragment,f),r=T(f),a=w(f,"DIV",{class:!0,title:!0});var m=_(a);Z(n.$$.fragment,m),m.forEach(p),f.forEach(p),this.h()},h(){u(a,"class","w-2/12 pl-4 mt-0.5"),u(a,"title","guess selected song"),u(e,"class","flex my-6"),u(e,"title","guess a song")},m(d,f){A(d,e,f),J(t,e,null),h(e,r),h(e,a),J(n,a,null),c=!0},p(d,f){const m={};f&2&&(m.placeholder=`${6-d[1].attempts} ${6-d[1].attempts!==1?"attempts":"attempt"} left`),f&4&&(m.items=d[2]),f&266240&&(m.$$scope={dirty:f,ctx:d}),!s&&f&8&&(s=!0,m.selectedItem=d[3],tt(()=>s=!1)),t.$set(m);const v={};f&262144&&(v.$$scope={dirty:f,ctx:d}),n.$set(v)},i(d){c||(z(t.$$.fragment,d),z(n.$$.fragment,d),c=!0)},o(d){H(t.$$.fragment,d),H(n.$$.fragment,d),c=!1},d(d){d&&p(e),x(t),x(n)}}}function _t(l){let e,t,s=l[12].name+"",r,a,n=l[12].artist+"",c;return{c(){e=b("div"),t=b("span"),r=S(s),a=S(" by "),c=S(n),this.h()},l(i){e=w(i,"DIV",{slot:!0,class:!0});var o=_(e);t=w(o,"SPAN",{});var d=_(t);r=V(d,s),a=V(d," by "),c=V(d,n),d.forEach(p),o.forEach(p),this.h()},h(){u(e,"slot","item"),u(e,"class","border-2 h-10 px-2 py-3 w-full text-left rounded-sm bg-gray-900 text-white hover:text-blue-500 hover:border-blue-500 overflow-ellipsis whitespace-nowrap overflow-hidden transition-colors duration-150")},m(i,o){A(i,e,o),h(e,t),h(t,r),h(t,a),h(t,c)},p(i,o){o&4096&&s!==(s=i[12].name+"")&&se(r,s),o&4096&&n!==(n=i[12].artist+"")&&se(c,n)},d(i){i&&p(e)}}}function bt(l){let e,t,s;return{c(){e=b("div"),t=b("span"),s=S("could not find this song in our list."),this.h()},l(r){e=w(r,"DIV",{slot:!0,class:!0});var a=_(e);t=w(a,"SPAN",{});var n=_(t);s=V(n,"could not find this song in our list."),n.forEach(p),a.forEach(p),this.h()},h(){u(e,"slot","no-results"),u(e,"class","py-1")},m(r,a){A(r,e,a),h(e,t),h(t,s)},d(r){r&&p(e)}}}function wt(l){let e,t,s;return{c(){e=b("div"),t=b("span"),s=S("searching for songs..."),this.h()},l(r){e=w(r,"DIV",{slot:!0,class:!0});var a=_(e);t=w(a,"SPAN",{});var n=_(t);s=V(n,"searching for songs..."),n.forEach(p),a.forEach(p),this.h()},h(){u(e,"slot","loading"),u(e,"class","py-1")},m(r,a){A(r,e,a),h(e,t),h(t,s)},d(r){r&&p(e)}}}function kt(l){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(s){e=U(s,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var r=_(e);t=U(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),_(t).forEach(p),r.forEach(p),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M13 7l5 5m0 0l-5 5m5-5H6"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-6 w-6 mx-auto"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor"),u(e,"stroke-width","2")},m(s,r){A(s,e,r),h(e,t)},d(s){s&&p(e)}}}function $t(l){let e,t,s,r,a,n,c,i=l[1].attempts===0&&Re(),o=l[1].guesses&&Be(l);const d=[vt,gt],f=[];function m(v,g){return v[1].attempts<6&&!v[1].correct?0:1}return a=m(l),n=f[a]=d[a](l),{c(){e=b("div"),i&&i.c(),t=N(),s=b("div"),o&&o.c(),r=N(),n.c(),this.h()},l(v){e=w(v,"DIV",{});var g=_(e);i&&i.l(g),t=T(g),s=w(g,"DIV",{class:!0});var k=_(s);o&&o.l(k),r=T(k),n.l(k),k.forEach(p),g.forEach(p),this.h()},h(){u(s,"class","w-full px-0 transition-all sm:px-20 items-center game")},m(v,g){A(v,e,g),i&&i.m(e,null),h(e,t),h(e,s),o&&o.m(s,null),h(s,r),f[a].m(s,null),c=!0},p(v,[g]){v[1].attempts===0?i||(i=Re(),i.c(),i.m(e,t)):i&&(i.d(1),i=null),v[1].guesses?o?o.p(v,g):(o=Be(v),o.c(),o.m(s,r)):o&&(o.d(1),o=null);let k=a;a=m(v),a===k?f[a].p(v,g):(Ge(),H(f[k],1,1,()=>{f[k]=null}),Ke(),n=f[a],n?n.p(v,g):(n=f[a]=d[a](v),n.c()),z(n,1),n.m(s,null))},i(v){c||(z(n),c=!0)},o(v){H(n),c=!1},d(v){v&&p(e),i&&i.d(),o&&o.d(),f[a].d()}}}const He=l=>!l.correct,Fe=l=>l.correct;function yt(l,e,t){let s=!1,r={},a={},n=[];pe(async()=>{a.id=new URL(window.location.href).searchParams.get("playlist")||"5LQuCyn8AhcHpl31DgLaxL",t(0,s=new URL(window.location.href).searchParams.get("random")==="true"||!1);const g=await pt(a,s),k=g.daily;if(n=g.tracks,new Date(B.get().date)!==new Date||s){const I=he(k);B.set({guesses:[],date:new Date,correct:!1,attempts:0}),W.set(I)}t(1,r=B.get())}),B.listen(g=>t(1,r=g));let c=[],i={};const o=()=>{if(!i)return;const g=[...r.guesses||[]];if(i.id===W.get().id)g.push({song:W.get(),correct:!0,artistCorrect:!0}),B.setKey("guesses",g),B.setKey("correct",!0),B.setKey("attempts",r.attempts+1),fe("guess-song",{correct:!0});else{const k=n.find(I=>I.id==i.id);g.push({song:he(k),correct:!1,artistCorrect:i.artist.includes(W.get().artist)}),B.setKey("guesses",g),B.setKey("attempts",r.attempts+1),fe("guess-song",{correct:!1})}t(3,i=void 0),ce.set(!0)},d=async g=>(t(2,c=n.filter(k=>(k.name+" "+k.artists[0].name).toLowerCase().includes(g.toLowerCase()))),t(2,c=c.map(k=>he(k))),c),f=g=>{window.open(`https://open.spotify.com/track/${g.song.id}`,"_blank").focus()},m=g=>{window.open(`https://open.spotify.com/track/${g.song.id}`,"_blank").focus()};function v(g){i=g,t(3,i)}return[s,r,c,i,o,d,f,m,v]}class Et extends oe{constructor(e){super();ne(this,e,yt,$t,ie,{})}}function It(l){let e;return{c(){e=S("sounds cool")},l(t){e=V(t,"sounds cool")},m(t,s){A(t,e,s)},d(t){t&&p(e)}}}function Dt(l){let e,t,s,r,a,n,c,i,o,d,f,m,v,g,k,I,$,D,y,E,F,Y,G,M,j,C,P,L,re,q,le;return L=new ge({props:{title:"Close Popup",className:"mx-auto text-center block",type:"primary",$$slots:{default:[It]},$$scope:{ctx:l}}}),L.$on("click",l[2]),{c(){e=b("div"),t=b("div"),s=N(),r=b("div"),a=b("div"),n=b("h1"),c=S("Instructions"),i=N(),o=b("div"),d=b("ul"),f=b("li"),m=b("span"),v=S("press the play button"),g=N(),k=b("li"),I=b("span"),$=S("listen to the song snippet"),D=N(),y=b("li"),E=b("span"),F=S("type the name of the song or song artist into the box"),Y=N(),G=b("li"),M=b("span"),j=S("if you get the song incorrect or press skip, more of the song will be revealed"),C=N(),P=b("div"),X(L.$$.fragment),this.h()},l(R){e=w(R,"DIV",{});var O=_(e);t=w(O,"DIV",{class:!0}),_(t).forEach(p),s=T(O),r=w(O,"DIV",{class:!0});var ee=_(r);a=w(ee,"DIV",{class:!0});var Q=_(a);n=w(Q,"H1",{class:!0});var ve=_(n);c=V(ve,"Instructions"),ve.forEach(p),i=T(Q),o=w(Q,"DIV",{class:!0});var _e=_(o);d=w(_e,"UL",{class:!0});var te=_(d);f=w(te,"LI",{});var be=_(f);m=w(be,"SPAN",{});var we=_(m);v=V(we,"press the play button"),we.forEach(p),be.forEach(p),g=T(te),k=w(te,"LI",{});var ke=_(k);I=w(ke,"SPAN",{});var $e=_(I);$=V($e,"listen to the song snippet"),$e.forEach(p),ke.forEach(p),D=T(te),y=w(te,"LI",{});var ye=_(y);E=w(ye,"SPAN",{});var Ee=_(E);F=V(Ee,"type the name of the song or song artist into the box"),Ee.forEach(p),ye.forEach(p),Y=T(te),G=w(te,"LI",{});var Ie=_(G);M=w(Ie,"SPAN",{});var De=_(M);j=V(De,"if you get the song incorrect or press skip, more of the song will be revealed"),De.forEach(p),Ie.forEach(p),te.forEach(p),_e.forEach(p),C=T(Q),P=w(Q,"DIV",{class:!0});var Se=_(P);Z(L.$$.fragment,Se),Se.forEach(p),Q.forEach(p),ee.forEach(p),O.forEach(p),this.h()},h(){u(t,"class","flex overflow-y-auto overflow-x-hidden fixed absolute right-0 left-0 z-40 justify-center items-center h-modal md:h-full md:inset-0 bg-black opacity-50"),u(n,"class","text-3xl mx-auto text-center"),u(d,"class","text-left"),u(o,"class","p-4"),u(P,"class","w-full"),u(a,"class","relative rounded-lg mt-6 bg-gray-700 p-3 opacity-100 shadow"),u(r,"class","relative px-4 w-full max-w-2xl h-full md:h-auto mx-auto z-50"),Te(e,"hidden",l[0])},m(R,O){A(R,e,O),h(e,t),h(e,s),h(e,r),h(r,a),h(a,n),h(n,c),h(a,i),h(a,o),h(o,d),h(d,f),h(f,m),h(m,v),h(d,g),h(d,k),h(k,I),h(I,$),h(d,D),h(d,y),h(y,E),h(E,F),h(d,Y),h(d,G),h(G,M),h(M,j),h(a,C),h(a,P),J(L,P,null),re=!0,q||(le=ae(t,"click",l[1]),q=!0)},p(R,[O]){const ee={};O&8&&(ee.$$scope={dirty:O,ctx:R}),L.$set(ee),O&1&&Te(e,"hidden",R[0])},i(R){re||(z(L.$$.fragment,R),re=!0)},o(R){H(L.$$.fragment,R),re=!1},d(R){R&&p(e),x(L),q=!1,le()}}}function St(l,e,t){let{hidden:s=!0}=e;const r=()=>t(0,s=!0),a=()=>{t(0,s=!0),me.set(!0)};return l.$$set=n=>{"hidden"in n&&t(0,s=n.hidden)},[s,r,a]}class Vt extends oe{constructor(e){super();ne(this,e,St,Dt,ie,{hidden:0})}}function Nt(l){let e,t,s,r,a,n,c,i,o,d,f,m,v,g,k,I;return t=new Vt({props:{hidden:l[1]}}),n=new Et({}),o=new nt({}),{c(){e=b("div"),X(t.$$.fragment),s=N(),r=b("div"),a=b("div"),X(n.$$.fragment),i=N(),X(o.$$.fragment),d=N(),f=b("div"),m=K("svg"),v=K("circle"),g=K("animateTransform"),this.h()},l($){e=w($,"DIV",{});var D=_(e);Z(t.$$.fragment,D),s=T(D),r=w(D,"DIV",{class:!0});var y=_(r);a=w(y,"DIV",{class:!0});var E=_(a);Z(n.$$.fragment,E),E.forEach(p),y.forEach(p),i=T(D),Z(o.$$.fragment,D),d=T(D),f=w(D,"DIV",{class:!0});var F=_(f);m=U(F,"svg",{xmlns:!0,style:!0,width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0});var Y=_(m);v=U(Y,"circle",{cx:!0,cy:!0,fill:!0,stroke:!0,"stroke-width":!0,r:!0,"stroke-dasharray":!0});var G=_(v);g=U(G,"animateTransform",{attributeName:!0,type:!0,repeatCount:!0,dur:!0,values:!0,keyTimes:!0}),_(g).forEach(p),G.forEach(p),Y.forEach(p),F.forEach(p),D.forEach(p),this.h()},h(){u(a,"class",c=`text-center p-3 ${!l[1]||l[0]?"hidden":""}`),u(r,"class","max-w-screen-md mx-auto"),u(g,"attributeName","transform"),u(g,"type","rotate"),u(g,"repeatCount","indefinite"),u(g,"dur","0.9345794392523364s"),u(g,"values","0 50 50;360 50 50"),u(g,"keyTimes","0;1"),u(v,"cx","50"),u(v,"cy","50"),u(v,"fill","none"),u(v,"stroke","currentColor"),u(v,"stroke-width","7"),u(v,"r","38"),u(v,"stroke-dasharray","179.0707812546182 61.690260418206066"),u(m,"xmlns","http://www.w3.org/2000/svg"),ue(m,"margin","auto"),ue(m,"background","transparent"),ue(m,"display","block"),ue(m,"shape-rendering","auto"),u(m,"width","100px"),u(m,"height","100px"),u(m,"viewBox","0 0 100 100"),u(m,"preserveAspectRatio","xMidYMid"),u(f,"class",k=`w-full mx-auto text-center mt-20 text-blue-600 ${l[0]?"":"hidden"}`)},m($,D){A($,e,D),J(t,e,null),h(e,s),h(e,r),h(r,a),J(n,a,null),h(e,i),J(o,e,null),h(e,d),h(e,f),h(f,m),h(m,v),h(v,g),I=!0},p($,[D]){const y={};D&2&&(y.hidden=$[1]),t.$set(y),(!I||D&3&&c!==(c=`text-center p-3 ${!$[1]||$[0]?"hidden":""}`))&&u(a,"class",c),(!I||D&1&&k!==(k=`w-full mx-auto text-center mt-20 text-blue-600 ${$[0]?"":"hidden"}`))&&u(f,"class",k)},i($){I||(z(t.$$.fragment,$),z(n.$$.fragment,$),z(o.$$.fragment,$),I=!0)},o($){H(t.$$.fragment,$),H(n.$$.fragment,$),H(o.$$.fragment,$),I=!1},d($){$&&p(e),x(t),x(n),x(o)}}}function Tt(l,e,t){let s=!0,r;return pe(()=>{t(1,r=me.get()),B.listen(a=>{a.date&&t(0,s=!1)}),me.listen(a=>t(1,r=a))}),[s,r]}class Mt extends oe{constructor(e){super();ne(this,e,Tt,Nt,ie,{})}}export{Mt as default};
