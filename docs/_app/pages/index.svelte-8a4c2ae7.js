import{S as le,i as ae,s as oe,e as b,k as T,c as w,a as v,d as p,m as V,b as f,g as M,H as h,K as fe,t as D,h as S,j as K,w as J,F as G,x,G as U,y as ee,I as re,q as B,o as L,B as te,L as He,v as Fe,M as Ke,N as We,O as qe,P as Qe,U as Xe,V as Ie,W as De,X as Je,n as Ge,p as Ue,l as Se,Y as Te,Z as xe,_ as et,$ as tt,a0 as st,a1 as rt,f as ue}from"../chunks/vendor-89bed0de.js";import{c as z,a as X,s as ce,r as Ze,b as de}from"../chunks/store-de14ea9d.js";function lt(r){let e,t,s,a,l,u,o,n,i,c,d,m,k,$,g,_,y,N;return{c(){e=b("div"),t=b("div"),a=T(),l=b("div"),o=T(),n=b("div"),c=T(),d=b("div"),k=T(),$=b("div"),_=T(),y=b("div"),this.h()},l(I){e=w(I,"DIV",{class:!0});var E=v(e);t=w(E,"DIV",{class:!0}),v(t).forEach(p),a=V(E),l=w(E,"DIV",{class:!0}),v(l).forEach(p),o=V(E),n=w(E,"DIV",{class:!0}),v(n).forEach(p),c=V(E),d=w(E,"DIV",{class:!0}),v(d).forEach(p),k=V(E),$=w(E,"DIV",{class:!0}),v($).forEach(p),_=V(E),y=w(E,"DIV",{class:!0}),v(y).forEach(p),E.forEach(p),this.h()},h(){f(t,"class",s=`w-2/12 ${r[1](0,r[0].attempts)} border-r border-l`),f(l,"class",u=`w-2/12 ${r[1](1,r[0].attempts)} border-r border-l`),f(n,"class",i=`w-4/12 ${r[1](2,r[0].attempts)} border-r border-l`),f(d,"class",m=`w-4/12 ${r[1](3,r[0].attempts)} border-r border-l`),f($,"class",g=`w-6/12 ${r[1](4,r[0].attempts)} border-r border-l`),f(y,"class",N=`w-6/12 ${r[1](5,r[0].attempts)} border-r border-l`),f(e,"class","max-w-3xl mx-auto flex h-3")},m(I,E){M(I,e,E),h(e,t),h(e,a),h(e,l),h(e,o),h(e,n),h(e,c),h(e,d),h(e,k),h(e,$),h(e,_),h(e,y)},p(I,[E]){E&1&&s!==(s=`w-2/12 ${I[1](0,I[0].attempts)} border-r border-l`)&&f(t,"class",s),E&1&&u!==(u=`w-2/12 ${I[1](1,I[0].attempts)} border-r border-l`)&&f(l,"class",u),E&1&&i!==(i=`w-4/12 ${I[1](2,I[0].attempts)} border-r border-l`)&&f(n,"class",i),E&1&&m!==(m=`w-4/12 ${I[1](3,I[0].attempts)} border-r border-l`)&&f(d,"class",m),E&1&&g!==(g=`w-6/12 ${I[1](4,I[0].attempts)} border-r border-l`)&&f($,"class",g),E&1&&N!==(N=`w-6/12 ${I[1](5,I[0].attempts)} border-r border-l`)&&f(y,"class",N)},i:fe,o:fe,d(I){I&&p(e)}}}function at(r,e,t){let{attempt:s}=e;const a=(l,u)=>{let o="bg-black opacity-40";return u===l&&!s.correct?o="bg-blue-500":u===l+1&&s.correct?o="bg-green-600":u>l&&(o="bg-red-600"),o};return r.$$set=l=>{"attempt"in l&&t(0,s=l.attempt)},[s,a]}class ot extends le{constructor(e){super();ae(this,e,at,lt,oe,{attempt:0})}}function Ve(r){let e,t=Math.floor(r[0].currentTime/60)+"",s,a,l=(r[0].currentTime%60<10?"0"+r[0].currentTime%60:r[0].currentTime%60)+"",u;return{c(){e=b("div"),s=D(t),a=D(`\r
          : `),u=D(l),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=v(e);s=S(n,t),a=S(n,`\r
          : `),u=S(n,l),n.forEach(p),this.h()},h(){f(e,"class","flex flex-1 justify-start font-mono")},m(o,n){M(o,e,n),h(e,s),h(e,a),h(e,u)},p(o,n){n&1&&t!==(t=Math.floor(o[0].currentTime/60)+"")&&K(s,t),n&1&&l!==(l=(o[0].currentTime%60<10?"0"+o[0].currentTime%60:o[0].currentTime%60)+"")&&K(u,l)},d(o){o&&p(e)}}}function Ne(r){let e,t=Math.floor(r[3]/60)+"",s,a,l=(Math.round(r[3]%60)<10?"0"+Math.round(r[3]%60):Math.round(r[3]%60))+"",u;return{c(){e=b("div"),s=D(t),a=D(`\r
          : `),u=D(l),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=v(e);s=S(n,t),a=S(n,`\r
          : `),u=S(n,l),n.forEach(p),this.h()},h(){f(e,"class","flex flex-1 justify-end font-mono")},m(o,n){M(o,e,n),h(e,s),h(e,a),h(e,u)},p(o,n){n&8&&t!==(t=Math.floor(o[3]/60)+"")&&K(s,t),n&8&&l!==(l=(Math.round(o[3]%60)<10?"0"+Math.round(o[3]%60):Math.round(o[3]%60))+"")&&K(u,l)},d(o){o&&p(e)}}}function nt(r){let e,t,s,a,l,u,o,n,i,c,d,m,k,$,g,_,y,N,I,E,O,Z,F;s=new ot({props:{attempt:r[1]}});let A=r[0]&&Ve(r),P=r[0]&&Ne(r);return{c(){e=b("footer"),t=b("div"),J(s.$$.fragment),a=T(),l=b("div"),u=b("div"),A&&A.c(),o=T(),n=b("div"),i=b("button"),c=G("svg"),d=G("path"),m=G("path"),$=T(),g=b("button"),_=G("svg"),y=G("path"),N=G("path"),E=T(),P&&P.c(),this.h()},l(j){e=w(j,"FOOTER",{class:!0});var C=v(e);t=w(C,"DIV",{class:!0});var H=v(t);x(s.$$.fragment,H),H.forEach(p),a=V(C),l=w(C,"DIV",{class:!0});var ne=v(l);u=w(ne,"DIV",{class:!0});var W=v(u);A&&A.l(W),o=V(W),n=w(W,"DIV",{class:!0});var R=v(n);i=w(R,"BUTTON",{title:!0,class:!0});var Y=v(i);c=U(Y,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0,xmlns:!0});var q=v(c);d=U(q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(d).forEach(p),m=U(q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(m).forEach(p),q.forEach(p),Y.forEach(p),$=V(R),g=w(R,"BUTTON",{title:!0,class:!0});var Q=v(g);_=U(Q,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var ie=v(_);y=U(ie,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(y).forEach(p),N=U(ie,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(N).forEach(p),ie.forEach(p),Q.forEach(p),R.forEach(p),E=V(W),P&&P.l(W),W.forEach(p),ne.forEach(p),C.forEach(p),this.h()},h(){f(t,"class","border-b"),f(d,"stroke-linecap","round"),f(d,"stroke-linejoin","round"),f(d,"stroke-width","2"),f(d,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),f(m,"stroke-linecap","round"),f(m,"stroke-linejoin","round"),f(m,"stroke-width","2"),f(m,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),f(c,"class","w-14 h-14 mx-auto"),f(c,"fill","none"),f(c,"stroke","currentColor"),f(c,"viewBox","0 0 24 24"),f(c,"xmlns","http://www.w3.org/2000/svg"),f(i,"title","Play Song"),f(i,"class",k=`hover:text-green-600 transition-colors duration-200 ${r[2]?"":"hidden"}`),f(y,"stroke-linecap","round"),f(y,"stroke-linejoin","round"),f(y,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),f(N,"stroke-linecap","round"),f(N,"stroke-linejoin","round"),f(N,"d","M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"),f(_,"xmlns","http://www.w3.org/2000/svg"),f(_,"class","w-14 h-14 mx-auto"),f(_,"fill","none"),f(_,"viewBox","0 0 24 24"),f(_,"stroke","currentColor"),f(_,"stroke-width","2"),f(g,"title","Pause Song"),f(g,"class",I=`hover:text-green-600 transition-colors duration-200 ${r[2]?"hidden":""}`),f(n,"class","text-center flex-1 justify-center"),f(u,"class","flex justify-evenly items-center w-full"),f(l,"class","max-w-screen-md mx-auto p-3"),f(e,"class","border-t border-gray-500 bottom-0 w-full fixed bg-gray-800")},m(j,C){M(j,e,C),h(e,t),ee(s,t,null),h(e,a),h(e,l),h(l,u),A&&A.m(u,null),h(u,o),h(u,n),h(n,i),h(i,c),h(c,d),h(c,m),h(n,$),h(n,g),h(g,_),h(_,y),h(_,N),h(u,E),P&&P.m(u,null),O=!0,Z||(F=[re(i,"click",r[4]),re(g,"click",r[5])],Z=!0)},p(j,[C]){const H={};C&2&&(H.attempt=j[1]),s.$set(H),j[0]?A?A.p(j,C):(A=Ve(j),A.c(),A.m(u,o)):A&&(A.d(1),A=null),(!O||C&4&&k!==(k=`hover:text-green-600 transition-colors duration-200 ${j[2]?"":"hidden"}`))&&f(i,"class",k),(!O||C&4&&I!==(I=`hover:text-green-600 transition-colors duration-200 ${j[2]?"hidden":""}`))&&f(g,"class",I),j[0]?P?P.p(j,C):(P=Ne(j),P.c(),P.m(u,null)):P&&(P.d(1),P=null)},i(j){O||(B(s.$$.fragment,j),O=!0)},o(j){L(s.$$.fragment,j),O=!1},d(j){j&&p(e),te(s),A&&A.d(),P&&P.d(),Z=!1,He(F)}}}function it(r,e,t){let s,a={attempts:0,guesses:[],correct:!1,date:new Date},l=!0,u=0;return Fe(()=>{t(1,a=z.get()),t(0,s=new Audio(X.get().preview)),s.addEventListener("loadedmetadata",()=>t(3,u=s.duration))}),z.listen(i=>t(1,a=i)),X.listen(i=>t(0,s=new Audio(i.preview))),ce.listen(i=>t(2,l=i)),[s,a,l,u,()=>{ce.set(!1),s.play();let i=12-a.attempts*6;const c=.08333333;switch(a.attempts){case 0:i=c;break;case 1:i=c*2;break;case 2:i=c*4;break;case 3:i=.5;break;case 4:i=.75;break;default:i=1;break}const d=a.correct?s.duration*1e3:s.duration/2*1e3*i;setTimeout(()=>{s.pause(),t(0,s.currentTime=0,s),ce.set(!0)},d)},()=>{s.pause(),t(0,s.currentTime=0,s),ce.set(!0)}]}class ct extends le{constructor(e){super();ae(this,e,it,nt,oe,{})}}function ut(r){let e,t,s,a,l;const u=r[5].default,o=Ke(u,r,r[4],null);return{c(){e=b("button"),o&&o.c(),this.h()},l(n){e=w(n,"BUTTON",{title:!0,class:!0});var i=v(e);o&&o.l(i),i.forEach(p),this.h()},h(){f(e,"title",r[1]),f(e,"class",t=`p-2 text-white ${r[2]} rounded-md shadow hover:shadow-lg transition-all duration-200 ${r[0]}`)},m(n,i){M(n,e,i),o&&o.m(e,null),s=!0,a||(l=re(e,"click",r[6]),a=!0)},p(n,[i]){o&&o.p&&(!s||i&16)&&We(o,u,n,n[4],s?Qe(u,n[4],i,null):qe(n[4]),null),(!s||i&2)&&f(e,"title",n[1]),(!s||i&5&&t!==(t=`p-2 text-white ${n[2]} rounded-md shadow hover:shadow-lg transition-all duration-200 ${n[0]}`))&&f(e,"class",t)},i(n){s||(B(o,n),s=!0)},o(n){L(o,n),s=!1},d(n){n&&p(e),o&&o.d(n),a=!1,l()}}}function ft(r,e,t){let{$$slots:s={},$$scope:a}=e,{type:l}=e,{className:u=""}=e,{title:o}=e,n;switch(l){case"primary":n="bg-blue-600 hover:bg-blue-500";break;case"submit":n="bg-green-600 hover:bg-green-500";break;case"warning":n="bg-orange-600 hover:bg-orange-500";break;case"breaking":n="bg-red-600 hover:bg-red-500";break;default:n="bg-blue-600 hover:bg-blue-500";break}function i(c){Xe.call(this,r,c)}return r.$$set=c=>{"type"in c&&t(3,l=c.type),"className"in c&&t(0,u=c.className),"title"in c&&t(1,o=c.title),"$$scope"in c&&t(4,a=c.$$scope)},[u,o,n,l,a,s,i]}class pe extends le{constructor(e){super();ae(this,e,ft,ut,oe,{type:3,className:0,title:1})}}function dt(r){let e;return{c(){e=D("sounds cool")},l(t){e=S(t,"sounds cool")},m(t,s){M(t,e,s)},d(t){t&&p(e)}}}function ht(r){let e,t,s,a,l,u,o,n,i,c,d,m,k,$,g,_,y,N,I,E,O,Z,F,A,P,j,C,H,ne,W;return C=new pe({props:{title:"Close Popup",type:"primary",$$slots:{default:[dt]},$$scope:{ctx:r}}}),C.$on("click",r[2]),{c(){e=b("div"),t=b("div"),s=T(),a=b("div"),l=b("div"),u=b("h1"),o=D("Instructions"),n=T(),i=b("div"),c=b("ul"),d=b("li"),m=b("span"),k=D("press the play button"),$=T(),g=b("li"),_=b("span"),y=D("listen to the song snippet"),N=T(),I=b("li"),E=b("span"),O=D("type the name of the song or song artist into the box"),Z=T(),F=b("li"),A=b("span"),P=D("if you get the song incorrect or press skip, more of the song will be revealed"),j=T(),J(C.$$.fragment),this.h()},l(R){e=w(R,"DIV",{});var Y=v(e);t=w(Y,"DIV",{class:!0}),v(t).forEach(p),s=V(Y),a=w(Y,"DIV",{class:!0});var q=v(a);l=w(q,"DIV",{class:!0});var Q=v(l);u=w(Q,"H1",{class:!0});var ie=v(u);o=S(ie,"Instructions"),ie.forEach(p),n=V(Q),i=w(Q,"DIV",{class:!0});var ge=v(i);c=w(ge,"UL",{class:!0});var se=v(c);d=w(se,"LI",{});var ve=v(d);m=w(ve,"SPAN",{});var _e=v(m);k=S(_e,"press the play button"),_e.forEach(p),ve.forEach(p),$=V(se),g=w(se,"LI",{});var be=v(g);_=w(be,"SPAN",{});var we=v(_);y=S(we,"listen to the song snippet"),we.forEach(p),be.forEach(p),N=V(se),I=w(se,"LI",{});var ke=v(I);E=w(ke,"SPAN",{});var $e=v(E);O=S($e,"type the name of the song or song artist into the box"),$e.forEach(p),ke.forEach(p),Z=V(se),F=w(se,"LI",{});var ye=v(F);A=w(ye,"SPAN",{});var Ee=v(A);P=S(Ee,"if you get the song incorrect or press skip, more of the song will be revealed"),Ee.forEach(p),ye.forEach(p),se.forEach(p),ge.forEach(p),j=V(Q),x(C.$$.fragment,Q),Q.forEach(p),q.forEach(p),Y.forEach(p),this.h()},h(){f(t,"class","flex overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-40 justify-center items-center h-modal md:h-full md:inset-0 bg-black opacity-50"),f(u,"class","text-3xl"),f(c,"class","text-left"),f(i,"class","p-4"),f(l,"class","relative rounded-lg bg-gray-700 p-3 opacity-100 shadow"),f(a,"class","relative px-4 w-full max-w-2xl h-full md:h-auto mx-auto z-50"),Ie(e,"hidden",r[0])},m(R,Y){M(R,e,Y),h(e,t),h(e,s),h(e,a),h(a,l),h(l,u),h(u,o),h(l,n),h(l,i),h(i,c),h(c,d),h(d,m),h(m,k),h(c,$),h(c,g),h(g,_),h(_,y),h(c,N),h(c,I),h(I,E),h(E,O),h(c,Z),h(c,F),h(F,A),h(A,P),h(l,j),ee(C,l,null),H=!0,ne||(W=re(t,"click",r[1]),ne=!0)},p(R,[Y]){const q={};Y&8&&(q.$$scope={dirty:Y,ctx:R}),C.$set(q),Y&1&&Ie(e,"hidden",R[0])},i(R){H||(B(C.$$.fragment,R),H=!0)},o(R){L(C.$$.fragment,R),H=!1},d(R){R&&p(e),te(C),ne=!1,W()}}}function pt(r,e,t){let{hidden:s=!0}=e;const a=()=>t(0,s=!0),l=()=>{t(0,s=!0),Ze.set(!0)};return r.$$set=u=>{"hidden"in u&&t(0,s=u.hidden)},[s,a,l]}class mt extends le{constructor(e){super();ae(this,e,pt,ht,oe,{hidden:0})}}const he=r=>({name:r.name,artist:r.artists?r.artists[0].name:"unknown artist",id:r.id,preview:r.preview_url}),me=(r,e)=>{const t=Math.abs(r.getTime()-e.getTime());return Math.ceil(t/(1e3*60*60*24))},Me=async()=>{const r=new URLSearchParams;r.append("grant_type","client_credentials");const e=new Headers;e.append("Authorization","Basic ZTA2MjNlNTk1YjZkNGI2YTg5M2FlMDk5YzUzYzE3NWY6MzMwNDRmYTNmZTY3NDEzNmFhOWVmZDIyZjI0MGMyZjc="),e.append("Content-Type","application/x-www-form-urlencoded");const s=await(await fetch("https://accounts.spotify.com/api/token",{method:"POST",body:r,redirect:"follow",headers:e})).json();return{token:s.access_token,expires_at:new Date(Date.now()+s.expires_in*1e3),type:s.type}},gt=async(r,e)=>await(await fetch(`https://api.spotify.com/v1/playlists/${r}/`,{headers:{accept:"application/json",authorization:`Bearer ${e}`},method:"GET"})).json(),vt=async(r,e)=>{let t=r.tracks.items,s=r.tracks.next;for(;s;){const l=await(await fetch(s,{headers:{accept:"application/json",authorization:`Bearer ${e}`},method:"GET"})).json();if(l.error)throw new Error(`Oops! ${l.error.status}: ${l.error.message}`);t=t.concat(l.items),s=l.next,t.push(l.items)}return t=t.filter(a=>a.track&&a.track.preview_url),t.map(a=>a.track)},_t=async(r,e)=>{const t=new Date,s=e?Math.random()*10*(Math.random()+20):0;De.use(Je(me(t,new Date("15/01/2002"))+s));const a=De.int(0,r.length-1);return r[a]};function bt(r){let e,t=X.get().name+"",s,a,l=X.get().artist+"",u,o,n,i;return{c(){e=b("div"),s=D(t),a=D(" by "),u=D(l),this.h()},l(c){e=w(c,"DIV",{title:!0,class:!0});var d=v(e);s=S(d,t),a=S(d," by "),u=S(d,l),d.forEach(p),this.h()},h(){f(e,"title","Open in Spotify"),f(e,"class",o="cursor-pointer border-blue-600 border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden")},m(c,d){M(c,e,d),h(e,s),h(e,a),h(e,u),n||(i=re(e,"click",r[5]),n=!0)},p:fe,d(c){c&&p(e),n=!1,i()}}}function je(r){let e,t,s=me(new Date,r[2])+"",a;return{c(){e=b("span"),t=D("audial #"),a=D(s),this.h()},l(l){e=w(l,"SPAN",{class:!0});var u=v(e);t=S(u,"audial #"),a=S(u,s),u.forEach(p),this.h()},h(){f(e,"class","my-2")},m(l,u){M(l,e,u),h(e,t),h(e,a)},p:fe,d(l){l&&p(e)}}}function Ae(r){let e,t,s,a,l,u,o;return t=new pe({props:{title:"Share Score",className:"block mx-auto",type:"submit",$$slots:{default:[wt]},$$scope:{ctx:r}}}),t.$on("click",r[4]),{c(){e=b("div"),J(t.$$.fragment),s=T(),a=b("p"),l=D("copied to clipboard."),this.h()},l(n){e=w(n,"DIV",{class:!0});var i=v(e);x(t.$$.fragment,i),s=V(i),a=w(i,"P",{class:!0});var c=v(a);l=S(c,"copied to clipboard."),c.forEach(p),i.forEach(p),this.h()},h(){f(a,"class",u=`${r[1]?"opacity-100":"opacity-0"} text-blue-100 font-semibold transition-all duration-500 my-2`),f(e,"class","w-full mx-auto my-2")},m(n,i){M(n,e,i),ee(t,e,null),h(e,s),h(e,a),h(a,l),o=!0},p(n,i){const c={};i&64&&(c.$$scope={dirty:i,ctx:n}),t.$set(c),(!o||i&2&&u!==(u=`${n[1]?"opacity-100":"opacity-0"} text-blue-100 font-semibold transition-all duration-500 my-2`))&&f(a,"class",u)},i(n){o||(B(t.$$.fragment,n),o=!0)},o(n){L(t.$$.fragment,n),o=!1},d(n){n&&p(e),te(t)}}}function wt(r){let e;return{c(){e=D("share")},l(t){e=S(t,"share")},m(t,s){M(t,e,s)},d(t){t&&p(e)}}}function kt(r){let e,t=!z.get().correct,s,a,l,u=r[3]()+"",o,n,i,c=t&&bt(r),d=!r[0]&&je(r),m=!r[0]&&Ae(r);return{c(){e=b("div"),c&&c.c(),s=T(),d&&d.c(),a=T(),l=b("span"),o=D(u),n=T(),m&&m.c(),this.h()},l(k){e=w(k,"DIV",{class:!0});var $=v(e);c&&c.l($),s=V($),d&&d.l($),a=V($),l=w($,"SPAN",{});var g=v(l);o=S(g,u),g.forEach(p),n=V($),m&&m.l($),$.forEach(p),this.h()},h(){f(e,"class","py-3")},m(k,$){M(k,e,$),c&&c.m(e,null),h(e,s),d&&d.m(e,null),h(e,a),h(e,l),h(l,o),h(e,n),m&&m.m(e,null),i=!0},p(k,[$]){t&&c.p(k,$),k[0]?d&&(d.d(1),d=null):d?d.p(k,$):(d=je(k),d.c(),d.m(e,a)),k[0]?m&&(Ge(),L(m,1,1,()=>{m=null}),Ue()):m?(m.p(k,$),$&1&&B(m,1)):(m=Ae(k),m.c(),B(m,1),m.m(e,null))},i(k){i||(B(m),i=!0)},o(k){L(m),i=!1},d(k){k&&p(e),c&&c.d(),d&&d.d(),m&&m.d()}}}function $t(r,e,t){let{forceRandom:s}=e,a=!1;const l=new Date("3/29/2022"),u=()=>{let i="";for(const c of z.get().guesses||[])c.correct?i+="\u{1F7E9} ":c.artistCorrect?i+="\u{1F7E8} ":i+="\u{1F7E5} ";for(let c=0;c<6-z.get().attempts;c++)i+="\u2B1B ";return i},o=()=>{let i="audial #"+me(new Date,l);i+=`
`+u(),i+=`
https://audial.mogdan.xyz`,navigator.clipboard.writeText(i),t(1,a=!0)},n=()=>{window.open(`https://open.spotify.com/track/${X.get().id}`,"_blank").focus()};return r.$$set=i=>{"forceRandom"in i&&t(0,s=i.forceRandom)},[s,a,l,u,o,n]}class yt extends le{constructor(e){super();ae(this,e,$t,kt,oe,{forceRandom:0})}}function Ce(r,e,t){const s=r.slice();return s[14]=e[t],s}function Pe(r,e,t){const s=r.slice();return s[14]=e[t],s}function Re(r){let e,t,s;return{c(){e=b("div"),t=b("span"),s=D("listen to the song and try to guess it correctly. you have 6 attempts."),this.h()},l(a){e=w(a,"DIV",{class:!0});var l=v(e);t=w(l,"SPAN",{class:!0});var u=v(t);s=S(u,"listen to the song and try to guess it correctly. you have 6 attempts."),u.forEach(p),l.forEach(p),this.h()},h(){f(t,"class","text-center mx-auto w-full text-blue-100"),f(e,"class","w-full px-0 sm:px-20 transition-all duration-200")},m(a,l){M(a,e,l),h(e,t),h(t,s)},d(a){a&&p(e)}}}function ze(r){let e,t,s=r[1].guesses.filter(Oe),a=[];for(let o=0;o<s.length;o+=1)a[o]=Be(Pe(r,s,o));let l=r[1].guesses.filter(Ye),u=[];for(let o=0;o<l.length;o+=1)u[o]=Le(Ce(r,l,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=T();for(let o=0;o<u.length;o+=1)u[o].c();t=Se()},l(o){for(let n=0;n<a.length;n+=1)a[n].l(o);e=V(o);for(let n=0;n<u.length;n+=1)u[n].l(o);t=Se()},m(o,n){for(let i=0;i<a.length;i+=1)a[i].m(o,n);M(o,e,n);for(let i=0;i<u.length;i+=1)u[i].m(o,n);M(o,t,n)},p(o,n){if(n&2){s=o[1].guesses.filter(Oe);let i;for(i=0;i<s.length;i+=1){const c=Pe(o,s,i);a[i]?a[i].p(c,n):(a[i]=Be(c),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=s.length}if(n&2){l=o[1].guesses.filter(Ye);let i;for(i=0;i<l.length;i+=1){const c=Ce(o,l,i);u[i]?u[i].p(c,n):(u[i]=Le(c),u[i].c(),u[i].m(t.parentNode,t))}for(;i<u.length;i+=1)u[i].d(1);u.length=l.length}},d(o){Te(a,o),o&&p(e),Te(u,o),o&&p(t)}}}function Be(r){let e,t=r[14].song.name+"",s,a,l=r[14].song.artist+"",u,o,n,i;function c(){return r[7](r[14])}return{c(){e=b("div"),s=D(t),a=D(" by "),u=D(l),this.h()},l(d){e=w(d,"DIV",{title:!0,class:!0});var m=v(e);s=S(m,t),a=S(m," by "),u=S(m,l),m.forEach(p),this.h()},h(){f(e,"title","Open in Spotify"),f(e,"class",o=`cursor-pointer ${r[14].artistCorrect?"border-amber-400":"border-red-600"} border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden`)},m(d,m){M(d,e,m),h(e,s),h(e,a),h(e,u),n||(i=re(e,"click",c),n=!0)},p(d,m){r=d,m&2&&t!==(t=r[14].song.name+"")&&K(s,t),m&2&&l!==(l=r[14].song.artist+"")&&K(u,l),m&2&&o!==(o=`cursor-pointer ${r[14].artistCorrect?"border-amber-400":"border-red-600"} border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden`)&&f(e,"class",o)},d(d){d&&p(e),n=!1,i()}}}function Le(r){let e,t=r[14].song.name+"",s,a,l=r[14].song.artist+"",u,o,n,i;function c(){return r[8](r[14])}return{c(){e=b("div"),s=D(t),a=D(" by "),u=D(l),o=T(),this.h()},l(d){e=w(d,"DIV",{title:!0,class:!0});var m=v(e);s=S(m,t),a=S(m," by "),u=S(m,l),o=V(m),m.forEach(p),this.h()},h(){f(e,"title","Open in Spotify"),f(e,"class","cursor-pointer border-green-600 border-2 h-10 p-2 my-2 w-full text-left rounded-sm bg-gray-900 overflow-ellipsis whitespace-nowrap overflow-hidden")},m(d,m){M(d,e,m),h(e,s),h(e,a),h(e,u),h(e,o),n||(i=re(e,"click",c),n=!0)},p(d,m){r=d,m&2&&t!==(t=r[14].song.name+"")&&K(s,t),m&2&&l!==(l=r[14].song.artist+"")&&K(u,l)},d(d){d&&p(e),n=!1,i()}}}function Et(r){let e,t;return e=new yt({props:{forceRandom:r[0]}}),{c(){J(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,a){ee(e,s,a),t=!0},p(s,a){const l={};a&1&&(l.forceRandom=s[0]),e.$set(l)},i(s){t||(B(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){te(e,s)}}}function It(r){let e,t,s,a,l,u,o;function n(c){r[9](c)}let i={name:"song-selection",className:"w-10/12",inputClassName:"border-gray-600 border-2 w-full h-8 px-2 py-5 rounded-sm bg-gray-900 hover:border-gray-400 focus:border-gray-400 outline-none transition-all duration-200",dropdownClassName:"p-0 bg-gray-900",placeholder:`${6-r[1].attempts} ${6-r[1].attempts!==1?"attempts":"attempt"} left`,items:r[2],minCharactersToSearch:2,searchFunction:r[6],labelFieldName:"name",valueFieldName:"id",showLoadingIndicator:!0,noInputStyles:!0,hideArrow:!0,$$slots:{loading:[Tt],"no-results":[St],item:[Dt,({label:c,item:d})=>({12:c,13:d}),({label:c,item:d})=>(c?4096:0)|(d?8192:0)]},$$scope:{ctx:r}};return r[3]!==void 0&&(i.selectedItem=r[3]),t=new et({props:i}),tt.push(()=>st(t,"selectedItem",n)),u=new pe({props:{title:"Submit Song Guess",type:"primary",className:"w-full",$$slots:{default:[Vt]},$$scope:{ctx:r}}}),u.$on("click",r[5]),{c(){e=b("div"),J(t.$$.fragment),a=T(),l=b("div"),J(u.$$.fragment),this.h()},l(c){e=w(c,"DIV",{class:!0,title:!0});var d=v(e);x(t.$$.fragment,d),a=V(d),l=w(d,"DIV",{class:!0,title:!0});var m=v(l);x(u.$$.fragment,m),m.forEach(p),d.forEach(p),this.h()},h(){f(l,"class","w-2/12 pl-4 mt-0.5"),f(l,"title","guess selected song"),f(e,"class","flex my-6"),f(e,"title","guess a song")},m(c,d){M(c,e,d),ee(t,e,null),h(e,a),h(e,l),ee(u,l,null),o=!0},p(c,d){const m={};d&2&&(m.placeholder=`${6-c[1].attempts} ${6-c[1].attempts!==1?"attempts":"attempt"} left`),d&4&&(m.items=c[2]),d&532480&&(m.$$scope={dirty:d,ctx:c}),!s&&d&8&&(s=!0,m.selectedItem=c[3],rt(()=>s=!1)),t.$set(m);const k={};d&524288&&(k.$$scope={dirty:d,ctx:c}),u.$set(k)},i(c){o||(B(t.$$.fragment,c),B(u.$$.fragment,c),o=!0)},o(c){L(t.$$.fragment,c),L(u.$$.fragment,c),o=!1},d(c){c&&p(e),te(t),te(u)}}}function Dt(r){let e,t,s=r[13].name+"",a,l,u=r[13].artist+"",o;return{c(){e=b("div"),t=b("span"),a=D(s),l=D(" by "),o=D(u),this.h()},l(n){e=w(n,"DIV",{slot:!0,class:!0});var i=v(e);t=w(i,"SPAN",{});var c=v(t);a=S(c,s),l=S(c," by "),o=S(c,u),c.forEach(p),i.forEach(p),this.h()},h(){f(e,"slot","item"),f(e,"class","border-2 h-10 px-2 py-3 w-full text-left rounded-sm bg-gray-900 text-white hover:text-blue-500 hover:border-blue-500 overflow-ellipsis whitespace-nowrap overflow-hidden transition-colors duration-150")},m(n,i){M(n,e,i),h(e,t),h(t,a),h(t,l),h(t,o)},p(n,i){i&8192&&s!==(s=n[13].name+"")&&K(a,s),i&8192&&u!==(u=n[13].artist+"")&&K(o,u)},d(n){n&&p(e)}}}function St(r){let e,t,s;return{c(){e=b("div"),t=b("span"),s=D("could not find this song in our list."),this.h()},l(a){e=w(a,"DIV",{slot:!0,class:!0});var l=v(e);t=w(l,"SPAN",{});var u=v(t);s=S(u,"could not find this song in our list."),u.forEach(p),l.forEach(p),this.h()},h(){f(e,"slot","no-results"),f(e,"class","py-1")},m(a,l){M(a,e,l),h(e,t),h(t,s)},d(a){a&&p(e)}}}function Tt(r){let e,t,s;return{c(){e=b("div"),t=b("span"),s=D("searching for songs..."),this.h()},l(a){e=w(a,"DIV",{slot:!0,class:!0});var l=v(e);t=w(l,"SPAN",{});var u=v(t);s=S(u,"searching for songs..."),u.forEach(p),l.forEach(p),this.h()},h(){f(e,"slot","loading"),f(e,"class","py-1")},m(a,l){M(a,e,l),h(e,t),h(t,s)},d(a){a&&p(e)}}}function Vt(r){let e,t;return{c(){e=G("svg"),t=G("path"),this.h()},l(s){e=U(s,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0});var a=v(e);t=U(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(t).forEach(p),a.forEach(p),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M13 7l5 5m0 0l-5 5m5-5H6"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"class","h-6 w-6 mx-auto"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke","currentColor"),f(e,"stroke-width","2")},m(s,a){M(s,e,a),h(e,t)},d(s){s&&p(e)}}}function Nt(r){let e,t,s,a,l,u,o,n,i;t=new mt({props:{hidden:r[4]}});let c=r[1].attempts===0&&Re(),d=r[1].guesses&&ze(r);const m=[It,Et],k=[];function $(g,_){return g[1].attempts<6&&!g[1].correct?0:1}return o=$(r),n=k[o]=m[o](r),{c(){e=b("div"),J(t.$$.fragment),s=T(),c&&c.c(),a=T(),l=b("div"),d&&d.c(),u=T(),n.c(),this.h()},l(g){e=w(g,"DIV",{});var _=v(e);x(t.$$.fragment,_),s=V(_),c&&c.l(_),a=V(_),l=w(_,"DIV",{class:!0});var y=v(l);d&&d.l(y),u=V(y),n.l(y),y.forEach(p),_.forEach(p),this.h()},h(){f(l,"class","w-full px-0 transition-all sm:px-20 items-center game")},m(g,_){M(g,e,_),ee(t,e,null),h(e,s),c&&c.m(e,null),h(e,a),h(e,l),d&&d.m(l,null),h(l,u),k[o].m(l,null),i=!0},p(g,[_]){const y={};_&16&&(y.hidden=g[4]),t.$set(y),g[1].attempts===0?c||(c=Re(),c.c(),c.m(e,a)):c&&(c.d(1),c=null),g[1].guesses?d?d.p(g,_):(d=ze(g),d.c(),d.m(l,u)):d&&(d.d(1),d=null);let N=o;o=$(g),o===N?k[o].p(g,_):(Ge(),L(k[N],1,1,()=>{k[N]=null}),Ue(),n=k[o],n?n.p(g,_):(n=k[o]=m[o](g),n.c()),B(n,1),n.m(l,null))},i(g){i||(B(t.$$.fragment,g),B(n),i=!0)},o(g){L(t.$$.fragment,g),L(n),i=!1},d(g){g&&p(e),te(t),c&&c.d(),d&&d.d(),k[o].d()}}}const Oe=r=>!r.correct,Ye=r=>r.correct;function Mt(r,e,t){let s;xe(r,Ze,g=>t(4,s=g));let a=!1,l={},u={},o=[];Fe(async()=>{let g=de.get();g.token||(g=await Me(),de.set(g)),new Date(g.expires_at)<new Date&&(g=await Me(),de.set(g)),u=await gt("5LQuCyn8AhcHpl31DgLaxL",g.token),t(0,a=new URL(window.location.href).searchParams.get("random")==="true"),o=await vt(u,g.token);const _=await _t(o,a);if(new Date(z.get().date)!==new Date||a){const y=he(_);z.set({guesses:[],date:new Date,correct:!1,attempts:0}),X.set(y)}t(1,l=z.get())}),z.listen(g=>t(1,l=g));let n=[],i={};const c=()=>{if(!i)return;const g=[...l.guesses||[]];if(i.id===X.get().id)g.push({song:X.get(),correct:!0,artistCorrect:!0}),z.setKey("guesses",g),z.setKey("correct",!0),z.setKey("attempts",l.attempts+1);else{const _=o.find(y=>y.id==i.id);g.push({song:he(_),correct:!1,artistCorrect:i.artist.includes(X.get().artist)}),z.setKey("guesses",g),z.setKey("attempts",l.attempts+1)}t(3,i=void 0),ce.set(!0)},d=async g=>(t(2,n=o.filter(_=>(_.name+" "+_.artists[0].name).toLowerCase().includes(g.toLowerCase()))),t(2,n=n.map(_=>he(_))),n),m=g=>{window.open(`https://open.spotify.com/track/${g.song.id}`,"_blank").focus()},k=g=>{window.open(`https://open.spotify.com/track/${g.song.id}`,"_blank").focus()};function $(g){i=g,t(3,i)}return[a,l,n,i,s,c,d,m,k,$]}class jt extends le{constructor(e){super();ae(this,e,Mt,Nt,oe,{})}}function At(r){let e,t,s,a,l,u,o,n,i,c,d,m,k,$,g;return l=new jt({}),o=new ct({}),{c(){e=b("div"),t=b("div"),s=b("div"),a=b("div"),J(l.$$.fragment),u=T(),J(o.$$.fragment),i=T(),c=b("div"),d=G("svg"),m=G("circle"),k=G("animateTransform"),this.h()},l(_){e=w(_,"DIV",{});var y=v(e);t=w(y,"DIV",{class:!0});var N=v(t);s=w(N,"DIV",{class:!0});var I=v(s);a=w(I,"DIV",{class:!0});var E=v(a);x(l.$$.fragment,E),E.forEach(p),I.forEach(p),u=V(N),x(o.$$.fragment,N),N.forEach(p),i=V(y),c=w(y,"DIV",{class:!0});var O=v(c);d=U(O,"svg",{xmlns:!0,"xmlns:xlink":!0,style:!0,width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0});var Z=v(d);m=U(Z,"circle",{cx:!0,cy:!0,fill:!0,stroke:!0,"stroke-width":!0,r:!0,"stroke-dasharray":!0});var F=v(m);k=U(F,"animateTransform",{attributeName:!0,type:!0,repeatCount:!0,dur:!0,values:!0,keyTimes:!0}),v(k).forEach(p),F.forEach(p),Z.forEach(p),O.forEach(p),y.forEach(p),this.h()},h(){f(a,"class","text-center p-3"),f(s,"class","max-w-screen-md mx-auto"),f(t,"class",n=`${r[0]?"hidden":""}`),f(k,"attributeName","transform"),f(k,"type","rotate"),f(k,"repeatCount","indefinite"),f(k,"dur","0.9345794392523364s"),f(k,"values","0 50 50;360 50 50"),f(k,"keyTimes","0;1"),f(m,"cx","50"),f(m,"cy","50"),f(m,"fill","none"),f(m,"stroke","currentColor"),f(m,"stroke-width","7"),f(m,"r","38"),f(m,"stroke-dasharray","179.0707812546182 61.690260418206066"),f(d,"xmlns","http://www.w3.org/2000/svg"),f(d,"xmlns:xlink","http://www.w3.org/1999/xlink"),ue(d,"margin","auto"),ue(d,"background","transparent"),ue(d,"display","block"),ue(d,"shape-rendering","auto"),f(d,"width","100px"),f(d,"height","100px"),f(d,"viewBox","0 0 100 100"),f(d,"preserveAspectRatio","xMidYMid"),f(c,"class",$=`w-full mx-auto text-center mt-20 ${r[0]?"":"hidden"} text-blue-600`)},m(_,y){M(_,e,y),h(e,t),h(t,s),h(s,a),ee(l,a,null),h(t,u),ee(o,t,null),h(e,i),h(e,c),h(c,d),h(d,m),h(m,k),g=!0},p(_,[y]){(!g||y&1&&n!==(n=`${_[0]?"hidden":""}`))&&f(t,"class",n),(!g||y&1&&$!==($=`w-full mx-auto text-center mt-20 ${_[0]?"":"hidden"} text-blue-600`))&&f(c,"class",$)},i(_){g||(B(l.$$.fragment,_),B(o.$$.fragment,_),g=!0)},o(_){L(l.$$.fragment,_),L(o.$$.fragment,_),g=!1},d(_){_&&p(e),te(l),te(o)}}}function Ct(r,e,t){let s=!0;return z.listen(a=>{a.date&&t(0,s=!1)}),[s]}class zt extends le{constructor(e){super();ae(this,e,Ct,At,oe,{})}}export{zt as default};
